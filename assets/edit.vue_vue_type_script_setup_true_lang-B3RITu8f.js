import{d as h,h as p,M as i,w as t,N as B,P as D,o as m,a,i as I,k as V,D as j,l as F,R as G,q as M,t as P,v as s,L as T,j as q,u as J,J as L,S as O,Z,$,x as z}from"./index-Gdxi0XPM.js";/* empty css             *//* empty css              *//* empty css                     *//* empty css                    *//* empty css            *//* empty css               *//* empty css                    *//* empty css                 */import"./form-item-l0sNRNKZ.js";const oe=h({__name:"edit",emits:["refresh"],setup(A,{expose:c,emit:b}){const d=p(!1),l=p({id:0,title:"",rule:"",parent_id:"",is_menu:0,weight:0,status:1,remark:"",path:"",icon:""}),_=p([]),w=async()=>{try{const{data:u}=await D();_.value=u||[]}catch(u){console.error("获取用户权限失败:",u)}},g={label:"title",children:"children"},k=b,x=(u={})=>{console.log("接收参数",u);const e={...u};e.parent_id===0&&(e.parent_id=""),Object.assign(l.value,e),w(),d.value=!0},y=async()=>{let u;return l.value.id==0?u=await Z(l.value):u=await $(l.value),u.status&&(z.success(u.message),k("refresh"),d.value=!1),!1};return c({open:x}),(u,e)=>{const r=F,n=j,E=G,f=P,U=M,R=T,v=q,N=O,C=I,S=B;return m(),i(S,{modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=o=>d.value=o),title:"权限规则",width:"40%"},{default:t(()=>[a(C,{model:l.value,"label-width":"100px"},{default:t(()=>[a(n,{label:"权限名称",prop:"title"},{default:t(()=>[a(r,{modelValue:l.value.title,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.title=o),placeholder:"请输入权限名称"},null,8,["modelValue"])]),_:1}),a(n,{label:"权限标识",prop:"rule"},{default:t(()=>[a(r,{modelValue:l.value.rule,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.rule=o),placeholder:"如：user:create"},null,8,["modelValue"])]),_:1}),a(n,{label:"上级权限",prop:"parent_id"},{default:t(()=>[a(E,{modelValue:l.value.parent_id,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.parent_id=o),data:_.value,props:g,"node-key":"id","check-strictly":"","default-expand-all":"",placeholder:"请选择上级权限",clearable:"",filterable:!0,"allow-create":!0,"default-value":"0"},null,8,["modelValue","data"])]),_:1}),a(n,{label:"是否菜单",prop:"is_menu"},{default:t(()=>[a(U,{modelValue:l.value.is_menu,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.is_menu=o)},{default:t(()=>[a(f,{value:1},{default:t(()=>[...e[9]||(e[9]=[s("是",-1)])]),_:1}),a(f,{value:0},{default:t(()=>[...e[10]||(e[10]=[s("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"状态",prop:"status"},{default:t(()=>[a(R,{modelValue:l.value.status,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),l.value.is_menu===1?(m(),i(n,{key:0,label:"前端路径",prop:"path"},{default:t(()=>[a(r,{modelValue:l.value.path,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.path=o),placeholder:"如：/user/list"},null,8,["modelValue"])]),_:1})):V("",!0),l.value.is_menu===1?(m(),i(n,{key:1,label:"显示图标",prop:"icon"},{default:t(()=>[a(r,{style:{"max-width":"600px"},placeholder:"搜索图标"},{prepend:t(()=>[...e[11]||(e[11]=[s(" fa fa-circle-o ",-1)])]),append:t(()=>[a(v,{icon:J(L)},null,8,["icon"])]),_:1})]),_:1})):V("",!0),a(n,{label:"权重",prop:"weight"},{default:t(()=>[a(N,{modelValue:l.value.weight,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.weight=o),min:0},null,8,["modelValue"])]),_:1}),a(n,{label:"备注",prop:"remark"},{default:t(()=>[a(r,{modelValue:l.value.remark,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.remark=o),type:"textarea"},null,8,["modelValue"])]),_:1}),a(n,null,{default:t(()=>[a(v,{type:"primary",onClick:y},{default:t(()=>[...e[12]||(e[12]=[s("提交",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{oe as _};
//# sourceMappingURL=edit.vue_vue_type_script_setup_true_lang-B3RITu8f.js.map
