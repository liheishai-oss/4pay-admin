import{d as k,h as _,ao as V,ah as A,M as v,w as o,x as w,am as L,o as f,C as O,c as W,a as l,u as z,i as T,k as y,a9 as $,v as m,D as G,l as H,L as J,ap as K,ar as Q,j as X,as as Y,g as Z}from"./index-Gdxi0XPM.js";/* empty css                *//* empty css            *//* empty css               */import"./form-item-l0sNRNKZ.js";/* empty css              */import{g as ee,e as te,a as ae}from"./merchant-V1NwBl97.js";const le={"element-loading-text":"Âä†ËΩΩ‰∏≠..."},re=k({__name:"edit",emits:["refresh"],setup(oe,{expose:b,emit:E}){const u=_(!1),h=_(),s=_(!1),t=_({id:0,login_account:"",merchant_name:"",status:1,withdraw_config_type:1,withdraw_fee:0,withdraw_rate:0,whitelist_ips:""}),x=V(()=>t.value.withdraw_config_type===2),N=V(()=>t.value.withdraw_config_type===3),F=r=>(r/100).toFixed(2),U=r=>Math.round(parseFloat(r)*100),D=r=>(r/100).toFixed(2),M=r=>Math.round(parseFloat(r)*100),C=E,I=_({login_account:[{required:!0,message:"ËØ∑ËæìÂÖ•ÁôªÂΩïË¥¶Âè∑",trigger:"blur"}],merchant_name:[{required:!0,message:"ËØ∑ËæìÂÖ•ÂïÜÊà∑ÂêçÁß∞",trigger:"blur"}],withdraw_config_type:[{required:!0,message:"ËØ∑ÈÄâÊã©ÊèêÁé∞ÈÖçÁΩÆÁ±ªÂûã",trigger:"change"}],withdraw_fee:[{required:!1,message:"ËØ∑ËæìÂÖ•ÊèêÁé∞ÊâãÁª≠Ë¥π",trigger:"blur",validator:(r,e,a)=>{t.value.withdraw_config_type===2&&(!e||isNaN(Number(e))||Number(e)<0)?a(new Error("ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊèêÁé∞ÊâãÁª≠Ë¥π")):a()}}],withdraw_rate:[{required:!1,message:"ËØ∑ËæìÂÖ•ÊèêÁé∞Ë¥πÁéá",trigger:"blur",validator:(r,e,a)=>{t.value.withdraw_config_type===3&&(!e||isNaN(Number(e))||Number(e)<0)?a(new Error("ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊèêÁé∞Ë¥πÁéá")):a()}}]}),q=async(r={})=>{console.log("üîç EditForm open called",{data:r,visible:u.value,loading:s.value}),c(),s.value=!0;try{const e=r||{};let a={...e};if(e&&e.id&&typeof e.id=="number"&&e.id>0)try{const i=await ee("/api/v1/admin/merchant/detail",e.id);if(i.status&&i.data)a={...i.data};else{w.error("Ëé∑ÂèñÂïÜÊà∑ËØ¶ÊÉÖÂ§±Ë¥•");return}}catch{w.error("Ëé∑ÂèñÂïÜÊà∑ËØ¶ÊÉÖÂ§±Ë¥•");return}e&&e.id&&typeof e.id=="number"&&e.id>0&&(a.withdraw_fee&&(a.withdraw_fee=F(a.withdraw_fee)),a.withdraw_rate&&(a.withdraw_rate=D(a.withdraw_rate))),Object.keys(a).forEach(i=>{a[i]!==void 0&&a[i]!==null&&a[i]!==""&&(t.value[i]=a[i])}),(!e||!e.id||e.id<=0)&&(t.value.id=0,t.value.status=1,t.value.withdraw_fee=0,t.value.withdraw_rate=0,t.value.withdraw_config_type=1,t.value.whitelist_ips=""),u.value=!0}catch{w.error("Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•")}finally{s.value=!1}},R=async()=>{var r;try{await((r=h.value)==null?void 0:r.validate());const e={...t.value};t.value.withdraw_config_type===2?(e.withdraw_fee=U(e.withdraw_fee.toString()),e.withdraw_rate=0):t.value.withdraw_config_type===3?(e.withdraw_rate=M(e.withdraw_rate.toString()),e.withdraw_fee=0):(e.withdraw_fee=0,e.withdraw_rate=0),s.value=!0;let a;t.value.id>0?a=await te("/api/v1/admin/merchant/edit",e):a=await ae("/api/v1/admin/merchant/add",e),a.status?(w.success(a.message||"Êìç‰ΩúÊàêÂäü"),C("refresh"),u.value=!1):w.error(a.message||"Êìç‰ΩúÂ§±Ë¥•")}catch{w.error("Êèê‰∫§Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Ë°®Âçï‰ø°ÊÅØ")}finally{s.value=!1}},c=()=>{t.value={id:0,login_account:"",merchant_name:"",status:1,withdraw_config_type:1,withdraw_fee:0,withdraw_rate:0,whitelist_ips:""}};return A(u,(r,e)=>{e===!0&&r===!1&&c()}),b({open:q}),(r,e)=>{const a=$,i=H,d=G,S=J,p=Q,B=K,g=X,P=L,j=Y;return f(),v(P,{modelValue:u.value,"onUpdate:modelValue":e[8]||(e[8]=n=>u.value=n),title:t.value.id>0?"ÁºñËæëÂïÜÊà∑":"Êñ∞Â¢ûÂïÜÊà∑",size:"50%"},{default:o(()=>[O((f(),W("div",le,[l(z(T),{model:t.value,rules:I.value,ref_key:"formRef",ref:h,"label-width":"150px"},{default:o(()=>[l(a,{"content-position":"left"},{default:o(()=>[...e[9]||(e[9]=[m("Âü∫Êú¨‰ø°ÊÅØ",-1)])]),_:1}),l(d,{label:"ÁôªÂΩïË¥¶Âè∑",prop:"login_account"},{default:o(()=>[l(i,{modelValue:t.value.login_account,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.login_account=n),placeholder:"ËØ∑ËæìÂÖ•ÁôªÂΩïË¥¶Âè∑"},null,8,["modelValue"])]),_:1}),l(d,{label:"ÂïÜÊà∑ÂêçÁß∞",prop:"merchant_name"},{default:o(()=>[l(i,{modelValue:t.value.merchant_name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.merchant_name=n),placeholder:"ËØ∑ËæìÂÖ•ÂïÜÊà∑ÂêçÁß∞"},null,8,["modelValue"])]),_:1}),l(d,{label:"Áä∂ÊÄÅ",prop:"status"},{default:o(()=>[l(S,{modelValue:t.value.status,"onUpdate:modelValue":e[2]||(e[2]=n=>t.value.status=n),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),l(a,{"content-position":"left"},{default:o(()=>[...e[10]||(e[10]=[m("ÊèêÁé∞ÈÖçÁΩÆ",-1)])]),_:1}),l(d,{label:"ÈÖçÁΩÆÁ±ªÂûã",prop:"withdraw_config_type"},{default:o(()=>[l(B,{modelValue:t.value.withdraw_config_type,"onUpdate:modelValue":e[3]||(e[3]=n=>t.value.withdraw_config_type=n),placeholder:"ËØ∑ÈÄâÊã©ÈÖçÁΩÆÁ±ªÂûã",style:{width:"100%"}},{default:o(()=>[l(p,{label:"Á≥ªÁªüËßÑÂàô",value:1}),l(p,{label:"ÂçïÁ¨îÂõ∫ÂÆö",value:2}),l(p,{label:"ÂçïÁ¨îÊØî‰æã",value:3})]),_:1},8,["modelValue"])]),_:1}),x.value?(f(),v(d,{key:0,label:"ÊèêÁé∞ÊâãÁª≠Ë¥π",prop:"withdraw_fee"},{default:o(()=>[l(i,{modelValue:t.value.withdraw_fee,"onUpdate:modelValue":e[4]||(e[4]=n=>t.value.withdraw_fee=n),placeholder:"Âçï‰ΩçÔºöÂÖÉ"},{append:o(()=>[...e[11]||(e[11]=[m("ÂÖÉ",-1)])]),_:1},8,["modelValue"])]),_:1})):y("",!0),N.value?(f(),v(d,{key:1,label:"ÊèêÁé∞Ë¥πÁéá",prop:"withdraw_rate"},{default:o(()=>[l(i,{modelValue:t.value.withdraw_rate,"onUpdate:modelValue":e[5]||(e[5]=n=>t.value.withdraw_rate=n),placeholder:"‰æãÂ¶ÇÔºö1.5Ë°®Á§∫1.5%"},{append:o(()=>[...e[12]||(e[12]=[m("%",-1)])]),_:1},8,["modelValue"])]),_:1})):y("",!0),l(d,{label:"ÁôΩÂêçÂçïIP"},{default:o(()=>[l(i,{modelValue:t.value.whitelist_ips,"onUpdate:modelValue":e[6]||(e[6]=n=>t.value.whitelist_ips=n),type:"textarea",placeholder:"ËØ∑ËæìÂÖ•IPÂú∞ÂùÄÔºåÂ§ö‰∏™IPÁî®|ÂàÜÈöîÔºå‰æãÂ¶ÇÔºö192.168.1.1|192.168.1.2|10.0.0.1",rows:3},null,8,["modelValue"])]),_:1}),l(d,null,{default:o(()=>[l(g,{type:"primary",onClick:R,loading:s.value},{default:o(()=>[...e[13]||(e[13]=[m("Êèê‰∫§",-1)])]),_:1},8,["loading"]),l(g,{onClick:e[7]||(e[7]=n=>u.value=!1)},{default:o(()=>[...e[14]||(e[14]=[m("ÂèñÊ∂à",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[j,s.value]])]),_:1},8,["modelValue","title"])}}}),_e=Z(re,[["__scopeId","data-v-be31fe6a"]]);export{_e as default};
//# sourceMappingURL=edit-Cl5ZJedT.js.map
