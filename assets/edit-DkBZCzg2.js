import{d as U,g as _,aj as B,i as C,w as o,D as d,ao as F,o as v,Q as M,c as R,a as r,u as S,x as k,ap as q,n as f,y as P,z as j,X as z,q as A,au as N,_ as L}from"./index-BwnaPa-Z.js";/* empty css                */import{g as O,e as Q,a as T}from"./merchant-CRLv-zfn.js";const X={"element-loading-text":"Âä†ËΩΩ‰∏≠..."},$=U({__name:"edit",emits:["refresh"],setup(G,{expose:h,emit:g}){const n=_(!1),w=_(),u=_(!1),a=_({id:0,login_account:"",merchant_name:"",status:1,whitelist_ips:""}),V=g,b=_({login_account:[{required:!0,message:"ËØ∑ËæìÂÖ•ÁôªÂΩïË¥¶Âè∑",trigger:"blur"}],merchant_name:[{required:!0,message:"ËØ∑ËæìÂÖ•ÂïÜÊà∑ÂêçÁß∞",trigger:"blur"}]}),y=async(s={})=>{console.log("üîç EditForm open called",{data:s,visible:n.value,loading:u.value}),c(),u.value=!0;try{const e=s||{};let t={...e};if(e&&e.id&&typeof e.id=="number"&&e.id>0)try{const l=await O("/api/v1/admin/merchant/detail",e.id);if(l.status&&l.data)t={...l.data};else{d.error("Ëé∑ÂèñÂïÜÊà∑ËØ¶ÊÉÖÂ§±Ë¥•");return}}catch{d.error("Ëé∑ÂèñÂïÜÊà∑ËØ¶ÊÉÖÂ§±Ë¥•");return}e&&e.id&&typeof e.id=="number"&&e.id>0&&(t.withdraw_fee&&(t.withdraw_fee=formatAmount(t.withdraw_fee)),t.withdraw_rate&&(t.withdraw_rate=formatRate(t.withdraw_rate))),Object.keys(t).forEach(l=>{t[l]!==void 0&&t[l]!==null&&t[l]!==""&&(a.value[l]=t[l])}),(!e||!e.id||e.id<=0)&&(a.value.id=0,a.value.status=1,a.value.withdraw_fee=0,a.value.withdraw_rate=0,a.value.withdraw_config_type=1,a.value.whitelist_ips=""),n.value=!0}catch{d.error("Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•")}finally{u.value=!1}},E=async()=>{var s;try{await((s=w.value)==null?void 0:s.validate());const e={...a.value};a.value.withdraw_config_type===2?(e.withdraw_fee=parseAmount(e.withdraw_fee.toString()),e.withdraw_rate=0):a.value.withdraw_config_type===3?(e.withdraw_rate=parseRate(e.withdraw_rate.toString()),e.withdraw_fee=0):(e.withdraw_fee=0,e.withdraw_rate=0),u.value=!0;let t;a.value.id>0?t=await Q("/api/v1/admin/merchant/edit",e):t=await T("/api/v1/admin/merchant/add",e),t.status?(d.success(t.message||"Êìç‰ΩúÊàêÂäü"),V("refresh"),n.value=!1):d.error(t.message||"Êìç‰ΩúÂ§±Ë¥•")}catch{d.error("Êèê‰∫§Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Ë°®Âçï‰ø°ÊÅØ")}finally{u.value=!1}},c=()=>{a.value={id:0,login_account:"",merchant_name:"",status:1,withdraw_config_type:1,withdraw_fee:0,withdraw_rate:0,whitelist_ips:""}};return B(n,(s,e)=>{e===!0&&s===!1&&c()}),h({open:y}),(s,e)=>{const t=q,l=j,m=P,x=z,p=A,D=F,I=N;return v(),C(D,{modelValue:n.value,"onUpdate:modelValue":e[5]||(e[5]=i=>n.value=i),title:a.value.id>0?"ÁºñËæëÂïÜÊà∑":"Êñ∞Â¢ûÂïÜÊà∑",size:"50%"},{default:o(()=>[M((v(),R("div",X,[r(S(k),{model:a.value,rules:b.value,ref_key:"formRef",ref:w,"label-width":"150px"},{default:o(()=>[r(t,{"content-position":"left"},{default:o(()=>[...e[6]||(e[6]=[f("Âü∫Êú¨‰ø°ÊÅØ",-1)])]),_:1}),r(m,{label:"ÁôªÂΩïË¥¶Âè∑",prop:"login_account"},{default:o(()=>[r(l,{modelValue:a.value.login_account,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.login_account=i),placeholder:"ËØ∑ËæìÂÖ•ÁôªÂΩïË¥¶Âè∑"},null,8,["modelValue"])]),_:1}),r(m,{label:"ÂïÜÊà∑ÂêçÁß∞",prop:"merchant_name"},{default:o(()=>[r(l,{modelValue:a.value.merchant_name,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.merchant_name=i),placeholder:"ËØ∑ËæìÂÖ•ÂïÜÊà∑ÂêçÁß∞"},null,8,["modelValue"])]),_:1}),r(m,{label:"Áä∂ÊÄÅ",prop:"status"},{default:o(()=>[r(x,{modelValue:a.value.status,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.status=i),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),r(m,{label:"ÁôΩÂêçÂçïIP"},{default:o(()=>[r(l,{modelValue:a.value.whitelist_ips,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.whitelist_ips=i),type:"textarea",placeholder:"ËØ∑ËæìÂÖ•IPÂú∞ÂùÄÔºåÂ§ö‰∏™IPÁî®|ÂàÜÈöîÔºå‰æãÂ¶ÇÔºö192.168.1.1|192.168.1.2|10.0.0.1",rows:3},null,8,["modelValue"])]),_:1}),r(m,null,{default:o(()=>[r(p,{type:"primary",onClick:E,loading:u.value},{default:o(()=>[...e[7]||(e[7]=[f("Êèê‰∫§",-1)])]),_:1},8,["loading"]),r(p,{onClick:e[4]||(e[4]=i=>n.value=!1)},{default:o(()=>[...e[8]||(e[8]=[f("ÂèñÊ∂à",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[I,u.value]])]),_:1},8,["modelValue","title"])}}}),W=L($,[["__scopeId","data-v-5f07b3ee"]]);export{W as default};
//# sourceMappingURL=edit-DkBZCzg2.js.map
