{"version":3,"mappings":"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","names":["DetailForm","defineAsyncComponent","__vitePreload","detailFormRef","ref","openDetailFrom","row","nextTick","showSearch","toggleSearch","loadData","data","refreshData","handleSizeChange","handleCurrentChange","searchParams","resetSearchParams","useTableDataPlugin","supplierList","getOperationTypeTagType","type","formatAmount","amount","formatDateTime","dateTime","getAmountClass","handleSortChange","prop","order","handleViewOrder","orderNo","loadSupplierList","response","request","error","onMounted","_createVNode","_unref","_Transition","_withDirectives","_createElementVNode","_hoisted_1","_component_el_row","_component_el_col","_component_el_form_item","_component_el_select","$event","_createElementBlock","_Fragment","_renderList","supplier","_createBlock","_component_el_option","_component_el_input","_component_el_date_picker","_component_el_form","_component_el_button","_cache","_hoisted_2","Refresh","_hoisted_3","_component_el_button_group","Search","_hoisted_4","_component_el_table","_component_el_table_column","_withCtx","_component_el_tag","_createTextVNode","_toDisplayString","_normalizeClass","_openBlock","scope","_hoisted_6","_hoisted_7","_component_el_pagination"],"ignoreList":[],"sources":["../../src/pages/finance/supplier-balance-log.vue"],"sourcesContent":["<template>\n  <!-- 余额变动记录详情对话框 -->\n  <DetailForm ref=\"detailFormRef\" @refresh=\"refreshData\"/>\n\n  <!-- 搜索菜单部分的过渡效果 -->\n  <transition name=\"fade\">\n    <div class=\"table-com-search\" v-show=\"showSearch\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <el-form-item label=\"供应商\">\n            <el-select v-model=\"(searchParams as any).search.supplier_id\" placeholder=\"选择供应商\" clearable>\n              <el-option \n                v-for=\"supplier in supplierList\" \n                :key=\"supplier.id\" \n                :label=\"supplier.supplier_name\" \n                :value=\"supplier.id\" \n              />\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"操作类型\">\n            <el-select v-model=\"(searchParams as any).search.operation_type\" placeholder=\"选择操作类型\" clearable>\n              <el-option label=\"预付\" :value=\"1\" />\n              <el-option label=\"下发\" :value=\"2\" />\n              <el-option label=\"订单扣款\" :value=\"3\" />\n              <el-option label=\"退款\" :value=\"4\" />\n              <el-option label=\"系统调整\" :value=\"5\" />\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"操作人类型\">\n            <el-select v-model=\"(searchParams as any).search.operator_type\" placeholder=\"选择操作人类型\" clearable>\n              <el-option label=\"管理员\" :value=\"1\" />\n              <el-option label=\"系统\" :value=\"2\" />\n              <el-option label=\"订单\" :value=\"3\" />\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"操作人\">\n            <el-input v-model=\"(searchParams as any).search.operator_name\" placeholder=\"按操作人搜索\" clearable />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <el-form-item label=\"开始时间\">\n            <el-date-picker\n              v-model=\"(searchParams as any).search.start_date\"\n              type=\"datetime\"\n              placeholder=\"选择开始时间\"\n              format=\"YYYY-MM-DD HH:mm:ss\"\n              value-format=\"YYYY-MM-DD HH:mm:ss\"\n            />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"结束时间\">\n            <el-date-picker\n              v-model=\"(searchParams as any).search.end_date\"\n              type=\"datetime\"\n              placeholder=\"选择结束时间\"\n              format=\"YYYY-MM-DD HH:mm:ss\"\n              value-format=\"YYYY-MM-DD HH:mm:ss\"\n            />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"订单号\">\n            <el-input v-model=\"(searchParams as any).search.order_no\" placeholder=\"按订单号搜索\" clearable />\n          </el-form-item>\n        </el-col>\n      </el-row>\n\n      <!-- 搜索按钮和重置按钮 -->\n      <el-form :inline=\"true\" class=\"demo-form-inline\">\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"refreshData\">搜索</el-button>\n          <el-button type=\"primary\" @click=\"resetSearchParams\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </transition>\n\n  <!-- 表头 -->\n  <div class=\"table-header ba-scroll-style\">\n    <!-- 刷新按钮 -->\n    <el-button v-permission=\"'finance:supplier_balance_log:list'\" :icon=\"Refresh\" @click=\"refreshData\" color=\"#40485b\"/>\n\n    <!-- 搜索按钮 -->\n    <div class=\"table-search\">\n      <el-button-group class=\"ml-4\">\n        <el-button :icon=\"Search\" @click=\"toggleSearch\" />\n      </el-button-group>\n    </div>\n  </div>\n\n  <!-- 表格内容 -->\n  <div style=\"width: 100%; overflow-x: auto;\" class=\"table-content\">\n    <el-table\n        :data=\"data.data\"\n        border\n        stripe\n        max-height=\"600\"\n        style=\"width: 100%;\"\n        @sort-change=\"handleSortChange\"\n    >\n      <el-table-column prop=\"id\" label=\"记录ID\" align=\"center\" min-width=\"80\" sortable=\"custom\"/>\n      <el-table-column prop=\"supplier_name\" label=\"供应商\" align=\"center\" min-width=\"120\">\n        <template #default=\"{ row }\">\n          <el-tag type=\"primary\">{{ row.supplier_name }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"operation_type_text\" label=\"操作类型\" align=\"center\" min-width=\"100\">\n        <template #default=\"{ row }\">\n          <el-tag :type=\"getOperationTypeTagType(row.operation_type) as any\">\n            {{ row.operation_type_text }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"amount\" label=\"变动金额\" align=\"center\" min-width=\"120\" sortable=\"custom\">\n        <template #default=\"{ row }\">\n          <span :class=\"getAmountClass(row.amount)\">\n            ¥{{ formatAmount(row.amount) }}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"balance_before\" label=\"变动前余额\" align=\"center\" min-width=\"120\" sortable=\"custom\">\n        <template #default=\"{ row }\">\n          ¥{{ formatAmount(row.balance_before) }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"balance_after\" label=\"变动后余额\" align=\"center\" min-width=\"120\" sortable=\"custom\">\n        <template #default=\"{ row }\">\n          ¥{{ formatAmount(row.balance_after) }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"operator_type_text\" label=\"操作人类型\" align=\"center\" min-width=\"100\">\n        <template #default=\"{ row }\">\n          <el-tag :type=\"row.operator_type === 1 ? 'success' : row.operator_type === 2 ? 'info' : 'warning'\">\n            {{ row.operator_type_text }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"operator_name\" label=\"操作人\" align=\"center\" min-width=\"120\"/>\n      <el-table-column prop=\"order_no\" label=\"关联订单\" align=\"center\" min-width=\"150\">\n        <template #default=\"{ row }\">\n          <el-button \n            v-if=\"row.order_no\" \n            type=\"primary\" \n            size=\"small\" \n            @click=\"handleViewOrder(row.order_no)\"\n          >\n            {{ row.order_no }}\n          </el-button>\n          <span v-else>-</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" min-width=\"200\" show-overflow-tooltip/>\n      <el-table-column prop=\"created_at\" label=\"创建时间\" align=\"center\" min-width=\"150\" sortable=\"custom\">\n        <template #default=\"{ row }\">\n          {{ formatDateTime(row.created_at) }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" min-width=\"120\">\n        <template #default=\"scope\">\n          <el-button v-permission=\"'finance:supplier_balance_log:detail'\" size=\"small\" @click=\"openDetailFrom(scope.row)\">查看详情</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n  <div class=\"table-footer\">\n    <div class=\"table-pagination\">\n      <el-pagination\n          v-model:current-page=\"data.current_page\"\n          v-model:page-size=\"data.page_size\"\n          :page-sizes=\"[10, 50, 100, 200]\"\n          :background=\"true\"\n          prev-text=\"上一页\"\n          next-text=\"下一页\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"data.page_total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { Refresh, Search } from '@element-plus/icons-vue';\nimport { ref, onMounted, defineAsyncComponent, nextTick } from 'vue';\n// import { ElMessage } from 'element-plus';\nimport request from '@/utils/request';\n\n// 引入自定义插件和 API\nimport { useTableDataPlugin } from \"@/utils/plugins/table.plugin.ts\";\n\n// 导入详情页面\nconst DetailForm = defineAsyncComponent(() => import('./components/SupplierBalanceLogDetail.vue'));\n// 导入详情页面\nconst detailFormRef = ref<any>(null);\nconst openDetailFrom = (row: any = {}) => {\n  console.log(row);\n  // 使用 nextTick 确保组件已经挂载\n  nextTick(() => {\n    if (detailFormRef.value) {\n      detailFormRef.value.open({ ...row}); // 传递 `row` 作为参数\n    } else {\n      console.error(\"DetailForm 组件未正确挂载！\");\n    }\n  });\n};\n\n// 使用表格插件来管理表格的状态、数据等\nconst {\n  isVisible: showSearch,\n  toggleVisibility: toggleSearch,\n  loadData,\n  data,\n  refreshData,\n  handleSizeChange,\n  handleCurrentChange,\n  searchParams,\n  resetSearchParams\n} = useTableDataPlugin(\"/api/v1/admin/finance/supplier-balance-log\");\n\n// 确保搜索参数有正确的结构\nif (!(searchParams.value as any).search) {\n  (searchParams.value as any).search = {\n    supplier_id: '',\n    operation_type: '',\n    operator_type: '',\n    operator_name: '',\n    start_date: '',\n    end_date: '',\n    order_no: ''\n  };\n}\n\n// 供应商列表\nconst supplierList = ref<any[]>([]);\n\n// 计算属性\nconst getOperationTypeTagType = (type: number) => {\n  const typeMap: Record<number, string> = {\n    1: 'success',   // 预付\n    2: 'warning',  // 下发\n    3: 'info',     // 订单扣款\n    4: 'danger',   // 退款\n    5: ''          // 系统调整\n  }\n  return typeMap[type] || ''\n}\n\n// 方法\nconst formatAmount = (amount: number) => {\n  return (amount / 100).toFixed(2)\n}\n\nconst formatDateTime = (dateTime: string) => {\n  return new Date(dateTime).toLocaleString('zh-CN')\n}\n\nconst getAmountClass = (amount: number) => {\n  return amount > 0 ? 'text-success' : 'text-danger'\n}\n\n\n\nconst handleSortChange = ({ prop, order }: { prop: string, order: string }) => {\n  if (searchParams.value) {\n    (searchParams.value as any).sort_field = prop\n    (searchParams.value as any).sort_order = order === 'ascending' ? 'asc' : 'desc'\n    loadData()\n  }\n}\n\nconst handleViewOrder = (orderNo: string) => {\n  // 跳转到订单详情页面\n  window.open(`/order/home?search=${orderNo}`, '_blank')\n}\n\nconst loadSupplierList = async () => {\n  try {\n    const response = await request.get('/api/v1/admin/supplier', {\n      params: { page: 1, page_size: 1000 }\n    })\n    if ((response as any).code === 200) {\n      supplierList.value = (response as any).data.data || []\n    }\n  } catch (error) {\n    console.error('加载供应商列表失败:', error)\n  }\n}\n\n// 生命周期\nonMounted(() => {\n  loadSupplierList()\n  loadData() // 加载表格数据\n})\n</script>\n\n<style scoped>\n.table-com-container {\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.table-com-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.table-com-title h3 {\n  margin: 0 0 8px 0;\n  color: #333;\n  font-size: 18px;\n}\n\n.table-com-title p {\n  margin: 0;\n  color: #666;\n  font-size: 14px;\n}\n\n.table-com-actions {\n  display: flex;\n  gap: 12px;\n}\n\n.table-com-search {\n  padding: 20px;\n  background: #f8f9fa;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.table-com-pagination {\n  padding: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n.text-success {\n  color: #67c23a;\n  font-weight: bold;\n}\n\n.text-danger {\n  color: #f56c6c;\n  font-weight: bold;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.3s;\n}\n\n.fade-enter-from, .fade-leave-to {\n  opacity: 0;\n}\n</style>\n"],"file":"assets/supplier-balance-log-DgOuBlSY.js"}