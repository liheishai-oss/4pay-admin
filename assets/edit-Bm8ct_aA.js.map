{"version":3,"file":"edit-Bm8ct_aA.js","sources":["../../src/api/telegramAdmin.ts","../../src/pages/telegram/admin/edit.vue"],"sourcesContent":["// src/api/telegramAdmin.ts\nimport request from '../utils/request'\n\n// 获取列表\nexport function getTelegramAdmins(api: string, page: number, pageSize: number, search: Record<string, any> = {}) {\n    return request({\n        url: api,\n        method: 'get',\n        params: {\n            page,\n            page_size: pageSize,\n            search: JSON.stringify(search)\n        }\n    });\n}\n\n// 获取详情\nexport function getTelegramAdminDetail(api: string, id: number) {\n    return request({\n        url: `${api}/${id}`,\n        method: 'get'\n    });\n}\n\n// 新增\nexport function addTelegramAdmin(api: string, data: Record<string, any> = {}) {\n    return request({\n        url: api,\n        method: 'post',\n        data\n    });\n}\n\n// 编辑\nexport function editTelegramAdmin(api: string, data: Record<string, any> = {}) {\n    return request({\n        url: api,\n        method: 'post',\n        data\n    });\n}\n\n// 删除\nexport function deleteTelegramAdmin(api: string, ids: number | number[]) {\n    return request({\n        url: api,\n        method: 'post',\n        data: { ids: Array.isArray(ids) ? ids : [ids] }\n    });\n}\n\n// 状态开关\nexport function toggleTelegramAdminStatus(api: string, id: number) {\n    return request({\n        url: api,\n        method: 'post',\n        data: { id }\n    });\n}\n","<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport { ElForm, ElMessage } from 'element-plus'\nimport { editTelegramAdmin,addTelegramAdmin } from '@/api/telegramAdmin.ts'\n\nconst visible = ref(false)\nconst formRef = ref<InstanceType<typeof ElForm>>()\n\n// 表单数据\nconst form = ref({\n  id: 0,\n  telegram_id: '',\n  nickname: '',\n  username: '',\n  status: 1,\n  remark: ''\n})\n\n// 表单验证规则\nconst rules = ref({\n  telegram_id: [{ required: true, message: '请输入 Telegram 用户ID', trigger: 'blur' }],\n  nickname: [{ required: true, message: '请输入昵称', trigger: 'blur' }],\n  username: [{ required: true, message: '请输入用户名', trigger: 'blur' }]\n})\n\n// 打开弹窗\nconst open = (data: any = {}) => {\n  Object.assign(form.value, {\n    id: data.id || 0,\n    telegram_id: data.telegram_id || '',\n    nickname: data.nickname || '',\n    username: data.username || '',\n    status: data.status ?? 1,\n    remark: data.remark || ''\n  })\n  visible.value = true\n}\n\n// 提交表单\nconst handleSubmit = async () => {\n  await formRef.value?.validate()\n  const payload = { ...form.value }\n  const res = form.value.id === 0 ? await addTelegramAdmin('/api/v1/admin/telegram-admin/add', payload)\n      : await editTelegramAdmin('/api/v1/admin/telegram-admin/edit', payload)\n  if (res.status) {\n    ElMessage.success(res.message)\n    emit('refresh')\n    visible.value = false\n  } else {\n    ElMessage.error(res.message)\n  }\n}\n\n// 重置表单\nconst resetForm = () => {\n  form.value = {\n    id: 0,\n    telegram_id: '',\n    nickname: '',\n    username: '',\n    status: 1,\n    remark: ''\n  }\n}\n\n// 关闭弹窗时重置表单\nwatch(visible, (newVal) => {\n  if (!newVal) resetForm()\n})\n\nconst emit = defineEmits<{\n  (event: 'refresh'): void\n}>()\n\ndefineExpose({ open })\n</script>\n\n<template>\n  <el-drawer v-model=\"visible\" title=\"群组管理员\" size=\"50%\">\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"150px\">\n      <el-divider content-position=\"left\">基本信息</el-divider>\n\n      <el-form-item label=\"Telegram 用户ID\" prop=\"telegram_id\">\n        <el-input v-model=\"form.telegram_id\" placeholder=\"请输入 Telegram 用户ID\" />\n      </el-form-item>\n\n      <el-form-item label=\"昵称\" prop=\"nickname\">\n        <el-input v-model=\"form.nickname\" placeholder=\"请输入昵称\" />\n      </el-form-item>\n\n      <el-form-item label=\"用户名\" prop=\"username\">\n        <el-input v-model=\"form.username\" placeholder=\"请输入用户名\" />\n      </el-form-item>\n\n      <el-form-item label=\"状态\" prop=\"status\">\n        <el-switch v-model=\"form.status\" :active-value=\"1\" :inactive-value=\"0\" />\n      </el-form-item>\n\n      <el-form-item label=\"备注\" prop=\"remark\">\n        <el-input v-model=\"form.remark\" type=\"textarea\" />\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\n      </el-form-item>\n    </el-form>\n  </el-drawer>\n</template>\n"],"names":["addTelegramAdmin","api","data","request","editTelegramAdmin","visible","ref","formRef","form","rules","open","handleSubmit","_a","payload","res","ElMessage","emit","resetForm","watch","newVal","__emit","__expose","_createBlock","_component_el_drawer","$event","_createVNode","_unref","ElForm","_component_el_divider","_cache","_component_el_form_item","_component_el_input","_component_el_switch","_component_el_button"],"mappings":"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"}