const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/detail-CKpFf2rm.js","assets/index-DQjW5cRd.js","assets/index-BDOPLeYz.css","assets/orderManagement-C0-WVVZO.js","assets/detail-CoVh6DoR.css","assets/loading-oV0W9nDj.css","assets/empty-iVBaPuAw.css","assets/table-column-DHEyVPoW.css","assets/checkbox-CXazyT-T.css","assets/tag-CtW1DIiB.css"])))=>i.map(i=>d[i]);
import{d as me,h as B,y as pe,c as _e,a,e as p,u as o,w as t,T as fe,C as _,a0 as ge,M as y,F as he,j as ve,z as be,A as ye,B as we,aG as xe,o as h,at as Ce,a5 as ke,i as Te,E as Ve,b as Se,D as Ee,l as Re,ap as De,ar as Be,aH as $e,v as c,m as qe,J as $,H as U,ag as Me,G as ze,K as Fe,Y as E,X as Pe,k as q,au as I,aC as Ue,x as i,aS as k,s as T,g as Ie}from"./index-DQjW5cRd.js";/* empty css                   *//* empty css            *//* empty css               *//* empty css              *//* empty css                     *//* empty css                 *//* empty css             *//* empty css             *//* empty css                          */import"./form-item-l0sNRNKZ.js";import{u as Ye}from"./table.plugin-DtcfBVC9.js";const He={class:"table-com-search"},Ne={class:"search-header"},Oe={class:"search-title"},Ae={class:"search-buttons"},Le={class:"table-header ba-scroll-style"},Ge={class:"table-search"},je={style:{width:"100%","overflow-x":"auto"},class:"table-content"},Je={class:"table-footer"},Ke={class:"table-pagination"},Qe=me({__name:"home",setup(Xe){const Y=Ce(()=>I(()=>import("./detail-CKpFf2rm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),R=B(null),H=(s={})=>{console.log(s),Ue(()=>{R.value?R.value.open({...s}):console.error("DetailForm ç»„ä»¶æœªæ­£ç¡®æŒ‚è½½ï¼")})},{handleSelectionChange:N,hasSelectedRows:V,isVisible:O,toggleVisibility:M,loadData:A,data:f,refreshData:m,handleSizeChange:L,handleCurrentChange:G,searchParams:w}=Ye("/api/v1/admin/order");w.value.search||(w.value.search={});const j=()=>{w.value.search||(w.value.search={order_no:"",merchant_order_no:"",merchant_id:"",status:"",product_name:"",start_time:"",end_time:""})},d=B({order_no:"",merchant_order_no:"",merchant_id:"",status:"",product_name:"",timeRange:null}),D=B(!1),J=async()=>{D.value=!0;try{let s={...d.value};s.timeRange&&s.timeRange.length===2&&(s.start_time=s.timeRange[0],s.end_time=s.timeRange[1]),delete s.timeRange,delete s.quickTime,w.value.search=s,await m()}catch(s){console.error("æœç´¢å¤±è´¥:",s),i.error("æœç´¢å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{D.value=!1}},K=()=>{d.value={order_no:"",merchant_order_no:"",merchant_id:"",status:"",product_name:"",timeRange:null},w.value.search={...d.value},m()};pe(()=>{j(),A()});const z=s=>({1:"å¾…æ”¯ä»˜",2:"æ”¯ä»˜ä¸­",3:"æ”¯ä»˜æˆåŠŸ",4:"æ”¯ä»˜å¤±è´¥",5:"å·²é€€æ¬¾",6:"å·²å…³é—­"})[s]||"æœªçŸ¥çŠ¶æ€",Q=s=>({1:"warning",2:"primary",3:"success",4:"danger",5:"info",6:"info"})[s]||"info",X=s=>({0:"æœªé€šçŸ¥",1:"é€šçŸ¥æˆåŠŸ",2:"é€šçŸ¥å¤±è´¥"})[s]||"æœªçŸ¥çŠ¶æ€",W=s=>({0:"warning",1:"success",2:"danger"})[s]||"info",Z=async s=>{try{await k.confirm(`ç¡®å®šè¦é€€æ¬¾è®¢å• ${s.order_no} å—ï¼Ÿ`,"ç¡®è®¤é€€æ¬¾",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const{refundOrder:e}=await I(async()=>{const{refundOrder:l}=await import("./orderManagement-C0-WVVZO.js");return{refundOrder:l}},__vite__mapDeps([3,1,2])),r=await e("/api/v1/admin/order/refund",{order_id:s.id,reason:"ç®¡ç†å‘˜é€€æ¬¾"});r.status?(i.success("é€€æ¬¾ç”³è¯·å·²æäº¤"),m()):i.error(r.message)}catch(e){e!=="cancel"&&i.error("é€€æ¬¾ç”³è¯·å¤±è´¥")}},ee=async s=>{try{await k.confirm(`ç¡®å®šè¦è¡¥å• ${s.order_no} å—ï¼Ÿ`,"ç¡®è®¤è¡¥å•",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const e=await T.post("/api/v1/admin/order/reissue",{ids:[s.id]});e.code===200?(i.success("è¡¥å•æˆåŠŸ"),m()):i.error(e.msg)}catch{i.error("è¡¥å•å¤±è´¥")}},ae=async s=>{try{await k.confirm(`ç¡®å®šè¦é‡æ–°å›è°ƒ ${s.order_no} å—ï¼Ÿ`,"ç¡®è®¤å›è°ƒ",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const e=await T.post("/api/v1/admin/order/callback",{ids:[s.id]});e.code===200?(i.success("å›è°ƒæˆåŠŸ"),m()):i.error(e.msg)}catch{i.error("å›è°ƒå¤±è´¥")}},te=async()=>{var s;if(!V.value){i.warning("è¯·é€‰æ‹©è¦è¡¥å•çš„è®¢å•");return}try{await k.confirm("ç¡®å®šè¦æ‰¹é‡è¡¥å•é€‰ä¸­çš„è®¢å•å—ï¼Ÿ","ç¡®è®¤æ‰¹é‡è¡¥å•",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const e=await T.post("/api/v1/admin/order/reissue",{ids:((s=f.value.selectedRows)==null?void 0:s.map(r=>r.id))||[]});e.code===200?(i.success("æ‰¹é‡è¡¥å•æˆåŠŸ"),m()):i.error(e.msg)}catch{i.error("æ‰¹é‡è¡¥å•å¤±è´¥")}},se=async()=>{var s;if(!V.value){i.warning("è¯·é€‰æ‹©è¦å›è°ƒçš„è®¢å•");return}try{await k.confirm("ç¡®å®šè¦æ‰¹é‡å›è°ƒé€‰ä¸­çš„è®¢å•å—ï¼Ÿ","ç¡®è®¤æ‰¹é‡å›è°ƒ",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const e=await T.post("/api/v1/admin/order/callback",{ids:((s=f.value.selectedRows)==null?void 0:s.map(r=>r.id))||[]});e.code===200?(i.success("æ‰¹é‡å›è°ƒæˆåŠŸ"),m()):i.error(e.msg)}catch{i.error("æ‰¹é‡å›è°ƒå¤±è´¥")}},le=async s=>{try{const e=await T.post("/api/v1/admin/order/query",{order_no:s.order_no});if(e.code===200){const r=e.data;let l=`ğŸ“‹ è®¢å•ä¿¡æ¯
`;l+=`â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`,l+=`ğŸ”¢ è®¢å•å·ï¼š${r.order_no}
`,l+=`ğŸ“Š å½“å‰çŠ¶æ€ï¼š${z(r.status)}
`,l+=`ğŸ’° è®¢å•é‡‘é¢ï¼šÂ¥${(r.amount/100).toFixed(2)}
`,l+=`ğŸ“… åˆ›å»ºæ—¶é—´ï¼š${new Date(r.created_at).toLocaleString()}

`,l+=`ğŸ” æ”¯ä»˜é€šé“æŸ¥è¯¢ç»“æœ
`,l+=`â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
`,r.query_success?(l+=`âœ… æŸ¥è¯¢çŠ¶æ€ï¼šæˆåŠŸ
`,r.query_result&&r.query_result.unified_status_text?l+=`ğŸ“Š å½“å‰çŠ¶æ€ï¼š${r.query_result.unified_status_text}
`:l+=`ğŸ“Š å½“å‰çŠ¶æ€ï¼š${r.query_message}
`,r.query_result&&r.query_result.unified_status_text&&(l+=`
ğŸ“‹ çŠ¶æ€è¯¦æƒ…ï¼š
`,l+=`â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
`,l+=`ğŸ¯ ç»Ÿä¸€çŠ¶æ€ï¼š${r.query_result.unified_status_text}
`,l+=`ğŸ“ åŸå§‹çŠ¶æ€ï¼š${r.query_result.original_status||"æœªçŸ¥"}
`,l+=`ğŸ“Š çŠ¶æ€å­—æ®µï¼š${r.query_result.original_status_field||"status"}
`,l+=`ğŸ¢ ä¾›è´§å•†ç±»å‹ï¼š${r.query_result.supplier_type||"æœªçŸ¥"}
`),r.query_result&&Object.keys(r.query_result).length>0||(l+=`
ğŸ“„ é€šé“è¿”å›æ•°æ®ï¼šæ— æ•°æ®
`)):(l+=`âŒ æŸ¥è¯¢çŠ¶æ€ï¼šå¤±è´¥
`,l+=`âš ï¸  é”™è¯¯ä¿¡æ¯ï¼š${r.query_message}
`),l+=`
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;const x=l.replace(/\n/g,"<br>").replace(/`([^`]+)`/g,"<code>$1</code>");k.alert(x,"ğŸ” æŸ¥å•ç»“æœ",{confirmButtonText:"ç¡®å®š",type:r.query_success?"success":"warning",dangerouslyUseHTMLString:!0,customStyle:{"max-width":"900px","max-height":"700px",overflow:"auto","font-family":"monospace","line-height":"1.6","white-space":"pre-wrap","word-break":"break-all"}})}else console.error("æŸ¥å•APIè¿”å›é”™è¯¯ï¼š",e),i.error(e.msg||"æŸ¥å•å¤±è´¥")}catch(e){console.error("æŸ¥å•è¯·æ±‚å¼‚å¸¸ï¼š",e),i.error("æŸ¥å•å¤±è´¥ï¼š"+(e.message||"ç½‘ç»œé”™è¯¯"))}};return(s,e)=>{const r=qe,l=ve,x=Re,v=Ee,b=Se,C=Be,ne=De,F=Ve,re=$e,oe=Te,ie=ke,de=be,u=Fe,P=Pe,ue=ye,ce=we,g=xe("permission");return h(),_e(he,null,[a(o(Y),{ref_key:"detailFormRef",ref:R,onRefresh:o(m)},null,8,["onRefresh"]),a(fe,{name:"fade"},{default:t(()=>[_(p("div",He,[a(ie,{class:"search-card",shadow:"never"},{header:t(()=>[p("div",Ne,[p("span",Oe,[a(r,null,{default:t(()=>[a(o($))]),_:1}),e[8]||(e[8]=c(" è®¢å•æœç´¢ ",-1))]),a(l,{type:"text",onClick:o(M),class:"close-btn"},{default:t(()=>[a(r,null,{default:t(()=>[a(o(Me))]),_:1})]),_:1},8,["onClick"])])]),default:t(()=>[a(oe,{model:d.value,"label-width":"100px",class:"search-form"},{default:t(()=>[a(F,{gutter:20},{default:t(()=>[a(b,{span:6},{default:t(()=>[a(v,{label:"è®¢å•å·"},{default:t(()=>[a(x,{modelValue:d.value.order_no,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value.order_no=n),placeholder:"è¯·è¾“å…¥è®¢å•å·",clearable:"","prefix-icon":"Search"},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(v,{label:"å•†æˆ·è®¢å•å·"},{default:t(()=>[a(x,{modelValue:d.value.merchant_order_no,"onUpdate:modelValue":e[1]||(e[1]=n=>d.value.merchant_order_no=n),placeholder:"è¯·è¾“å…¥å•†æˆ·è®¢å•å·",clearable:"","prefix-icon":"Search"},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(v,{label:"å•†æˆ·ID"},{default:t(()=>[a(x,{modelValue:d.value.merchant_id,"onUpdate:modelValue":e[2]||(e[2]=n=>d.value.merchant_id=n),placeholder:"è¯·è¾“å…¥å•†æˆ·ID",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(v,{label:"è®¢å•çŠ¶æ€"},{default:t(()=>[a(ne,{modelValue:d.value.status,"onUpdate:modelValue":e[3]||(e[3]=n=>d.value.status=n),placeholder:"è¯·é€‰æ‹©è®¢å•çŠ¶æ€",clearable:"",style:{width:"100%"}},{default:t(()=>[a(C,{label:"å¾…æ”¯ä»˜",value:1}),a(C,{label:"æ”¯ä»˜ä¸­",value:2}),a(C,{label:"æ”¯ä»˜æˆåŠŸ",value:3}),a(C,{label:"æ”¯ä»˜å¤±è´¥",value:4}),a(C,{label:"å·²é€€æ¬¾",value:5}),a(C,{label:"å·²å…³é—­",value:6})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(F,{gutter:20},{default:t(()=>[a(b,{span:6},{default:t(()=>[a(v,{label:"æ”¯ä»˜äº§å“"},{default:t(()=>[a(x,{modelValue:d.value.product_name,"onUpdate:modelValue":e[4]||(e[4]=n=>d.value.product_name=n),placeholder:"è¯·è¾“å…¥äº§å“åç§°",clearable:"","prefix-icon":"Goods"},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(v,{label:"æ—¶é—´èŒƒå›´"},{default:t(()=>[a(re,{modelValue:d.value.timeRange,"onUpdate:modelValue":e[5]||(e[5]=n=>d.value.timeRange=n),type:"datetimerange","range-separator":"è‡³","start-placeholder":"å¼€å§‹æ—¶é—´","end-placeholder":"ç»“æŸæ—¶é—´",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(v,null,{default:t(()=>[p("div",Ae,[a(l,{type:"primary",onClick:J,loading:D.value},{default:t(()=>[a(r,null,{default:t(()=>[a(o($))]),_:1}),e[9]||(e[9]=c(" æœç´¢ ",-1))]),_:1},8,["loading"]),a(l,{onClick:K},{default:t(()=>[a(r,null,{default:t(()=>[a(o(U))]),_:1}),e[10]||(e[10]=c(" é‡ç½® ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[ze,o(O)]])]),_:1}),p("div",Le,[_(a(l,{icon:o(U),onClick:o(m),color:"#40485b"},null,8,["icon","onClick"]),[[g,"order:list"]]),_((h(),y(l,{type:"primary",disabled:!o(V),onClick:te},{default:t(()=>[...e[11]||(e[11]=[c("è¡¥å•",-1)])]),_:1},8,["disabled"])),[[g,"order:resend"]]),_((h(),y(l,{type:"primary",disabled:!o(V),onClick:se},{default:t(()=>[...e[12]||(e[12]=[c("å›è°ƒ",-1)])]),_:1},8,["disabled"])),[[g,"order:callback"]]),e[13]||(e[13]=ge('<div class="table-statistics" data-v-21ad3e16><span class="stat-item stat-highlight" data-v-21ad3e16>ç´¯è®¡è®¢å•æ•°: <b class="stat-number" data-v-21ad3e16>150</b></span><span class="stat-item stat-highlight" data-v-21ad3e16>è®¢å•æ€»é‡‘é¢: <b class="stat-number" data-v-21ad3e16>ï¿¥8000.00</b></span><span class="stat-item stat-success" data-v-21ad3e16>å·²ä»˜è®¢å•æ•°: <b class="stat-number" data-v-21ad3e16>100</b></span><span class="stat-item stat-success" data-v-21ad3e16>å·²ä»˜æ€»é‡‘é¢: <b class="stat-number" data-v-21ad3e16>ï¿¥6000.00</b></span><span class="stat-item stat-info" data-v-21ad3e16>å•†æˆ·æ€»æ”¶å…¥: <b class="stat-number" data-v-21ad3e16>ï¿¥5976.00</b></span><span class="stat-item stat-warning" data-v-21ad3e16>æœªä»˜è®¢å•æ•°: <b class="stat-number" data-v-21ad3e16>50</b></span><span class="stat-item stat-warning" data-v-21ad3e16>æœªä»˜æ€»é‡‘é¢: <b class="stat-number" data-v-21ad3e16>ï¿¥2000.00</b></span><span class="stat-item stat-success" data-v-21ad3e16>æˆåŠŸç‡: <b class="stat-number" data-v-21ad3e16>66.67%</b></span></div>',1)),p("div",Ge,[a(de,{class:"ml-4"},{default:t(()=>[a(l,{icon:o($),onClick:o(M)},null,8,["icon","onClick"])]),_:1})])]),p("div",je,[a(ue,{data:o(f).data,border:"",stripe:"","max-height":"600",style:{width:"100%"},onSelectionChange:o(N)},{default:t(()=>[a(u,{type:"selection",width:"40"}),a(u,{prop:"order_no",label:"å¹³å°å•å·",align:"center","min-width":"200"}),a(u,{prop:"merchant_order_no",label:"å•†æˆ·è®¢å•å·",align:"center","min-width":"167"}),a(u,{prop:"merchant.merchant_name",label:"å•†æˆ·åç§°",align:"center","min-width":"150"}),a(u,{prop:"amount",label:"é‡‘é¢",align:"center","min-width":"80"},{default:t(({row:n})=>[c(E((n.amount/100).toFixed(2)),1)]),_:1}),a(u,{label:"è®¢å•çŠ¶æ€",align:"center","min-width":"200"},{default:t(()=>[a(u,{label:"çŠ¶æ€",width:"100",align:"center"},{default:t(({row:n})=>[a(P,{type:Q(n.status)},{default:t(()=>[c(E(z(n.status)),1)]),_:2},1032,["type"])]),_:1}),a(u,{prop:"paid_time",label:"æ”¯ä»˜æ—¶é—´",width:"100",align:"center"})]),_:1}),a(u,{prop:"product.product_name",label:"æ”¯ä»˜äº§å“",align:"center","min-width":"120"}),a(u,{prop:"channel.channel_name",label:"æ”¯ä»˜é€šé“",align:"center","min-width":"120"}),a(u,{prop:"fee",label:"è´¹ç”¨",align:"center","min-width":"80"},{default:t(({row:n})=>[c(E((n.fee/100).toFixed(2)),1)]),_:1}),a(u,{prop:"notify_status",label:"é€šçŸ¥çŠ¶æ€",align:"center","min-width":"100"},{default:t(({row:n})=>[a(P,{type:W(n.notify_status),size:"small"},{default:t(()=>[c(E(X(n.notify_status)),1)]),_:2},1032,["type"])]),_:1}),a(u,{prop:"created_at",label:"åˆ›å»ºæ—¶é—´",align:"center","min-width":"180"}),a(u,{label:"æ“ä½œ",align:"center",fixed:"right","min-width":"250"},{default:t(n=>[_((h(),y(l,{size:"small",onClick:S=>H(n.row)},{default:t(()=>[...e[14]||(e[14]=[c("è®¢å•è¯¦æƒ…",-1)])]),_:1},8,["onClick"])),[[g,"order:detail"]]),_((h(),y(l,{size:"small",type:"info",onClick:S=>le(n.row)},{default:t(()=>[...e[15]||(e[15]=[c("æŸ¥å•",-1)])]),_:1},8,["onClick"])),[[g,"order:query"]]),n.row.status===3?_((h(),y(l,{key:0,size:"small",type:"warning",onClick:S=>Z(n.row)},{default:t(()=>[...e[16]||(e[16]=[c("é€€æ¬¾",-1)])]),_:1},8,["onClick"])),[[g,"order:refund"]]):q("",!0),[4,6].includes(n.row.status)?_((h(),y(l,{key:1,size:"small",type:"primary",onClick:S=>ee(n.row)},{default:t(()=>[...e[17]||(e[17]=[c("è¡¥å•",-1)])]),_:1},8,["onClick"])),[[g,"order:resend"]]):q("",!0),n.row.status===3?_((h(),y(l,{key:2,size:"small",type:"success",onClick:S=>ae(n.row)},{default:t(()=>[...e[18]||(e[18]=[c("å›è°ƒ",-1)])]),_:1},8,["onClick"])),[[g,"order:callback"]]):q("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])]),p("div",Je,[p("div",Ke,[a(ce,{"current-page":o(f).current_page,"onUpdate:currentPage":e[6]||(e[6]=n=>o(f).current_page=n),"page-size":o(f).page_size,"onUpdate:pageSize":e[7]||(e[7]=n=>o(f).page_size=n),"page-sizes":[10,50,100,200],background:!0,"prev-text":"ä¸Šä¸€é¡µ","next-text":"ä¸‹ä¸€é¡µ",layout:"total, sizes, prev, pager, next, jumper",total:o(f).page_total,onSizeChange:o(L),onCurrentChange:o(G)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}}),ua=Ie(Qe,[["__scopeId","data-v-21ad3e16"]]);export{ua as default};
//# sourceMappingURL=home-BILu8ftF.js.map
