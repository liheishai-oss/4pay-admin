import{d as B,g as I,a2 as N,y as S,c as i,e as f,F as g,ai as m,a as u,w as n,v as j,o as s,M as d,i as F,k as M,b3 as O,b4 as P,Y as T,t as y,x as v,a6 as D,_ as J}from"./index-Cc4fVNof.js";const L={class:"system-config-page"},U={class:"form-actions"},R=B({__name:"config",setup(Y){const h={device_config:"设备配置",auth_config:"后台登录认证配置"},r=I([]),c=N({}),b=e=>{switch(e){case"bool":return"el-switch";case"json":case"string":return"el-input";case"int":return"el-input";default:return"el-input"}},k=e=>e.config_type==="json"?{type:"textarea",rows:3,placeholder:"JSON 格式"}:e.config_type==="int"?{type:"number"}:{};S(async()=>{const o=await(await fetch("/api/v1/admin/system/config/list")).json();r.value=o.data||[],r.value.forEach(a=>{c[a.group_key]||(c[a.group_key]=[]),c[a.group_key].push(a)})});const w=async()=>{try{const e=r.value.map(o=>({id:o.id,config_value:o.config_value}));await fetch("/api/v1/admin/system/config/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),v.success("配置保存成功")}catch{v.error("保存失败")}},C=()=>{window.location.reload()};return(e,o)=>{const a=M,x=F,E=D,p=j;return s(),i("div",L,[(s(!0),i(g,null,m(c,(_,l)=>(s(),d(E,{key:l,class:"mb-4"},{header:n(()=>[f("span",null,T(h[l]||l),1)]),default:n(()=>[u(x,{model:_,"label-width":"160px"},{default:n(()=>[(s(!0),i(g,null,m(_,t=>(s(),d(a,{key:t.config_key,label:t.description||t.config_key},{default:n(()=>[(s(),d(O(b(t.config_type)),P({modelValue:t.config_value,"onUpdate:modelValue":V=>t.config_value=V},{ref_for:!0},k(t)),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128))]),_:2},1032,["model"])]),_:2},1024))),128)),f("div",U,[u(p,{type:"primary",onClick:w},{default:n(()=>[...o[0]||(o[0]=[y("保存配置",-1)])]),_:1}),u(p,{onClick:C},{default:n(()=>[...o[1]||(o[1]=[y("重置",-1)])]),_:1})])])}}}),z=J(R,[["__scopeId","data-v-5b99ff0b"]]);export{z as default};
//# sourceMappingURL=config-DQTsnknC.js.map
