import{d as j,h as B,ac as I,y as N,c as i,e as f,F as m,aq as g,a as u,w as n,j as S,o as s,M as d,i as F,D,b5 as M,b6 as O,Y as P,v as y,x as v,a5 as T,g as J}from"./index-DQjW5cRd.js";/* empty css             *//* empty css             */import"./form-item-l0sNRNKZ.js";const L={class:"system-config-page"},U={class:"form-actions"},q=j({__name:"config",setup(R){const h={device_config:"设备配置",auth_config:"后台登录认证配置"},c=B([]),r=I({}),b=e=>{switch(e){case"bool":return"el-switch";case"json":case"string":return"el-input";case"int":return"el-input";default:return"el-input"}},k=e=>e.config_type==="json"?{type:"textarea",rows:3,placeholder:"JSON 格式"}:e.config_type==="int"?{type:"number"}:{};N(async()=>{const o=await(await fetch("/api/v1/admin/system/config/list")).json();c.value=o.data||[],c.value.forEach(a=>{r[a.group_key]||(r[a.group_key]=[]),r[a.group_key].push(a)})});const w=async()=>{try{const e=c.value.map(o=>({id:o.id,config_value:o.config_value}));await fetch("/api/v1/admin/system/config/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),v.success("配置保存成功")}catch{v.error("保存失败")}},C=()=>{window.location.reload()};return(e,o)=>{const a=D,x=F,E=T,p=S;return s(),i("div",L,[(s(!0),i(m,null,g(r,(_,l)=>(s(),d(E,{key:l,class:"mb-4"},{header:n(()=>[f("span",null,P(h[l]||l),1)]),default:n(()=>[u(x,{model:_,"label-width":"160px"},{default:n(()=>[(s(!0),i(m,null,g(_,t=>(s(),d(a,{key:t.config_key,label:t.description||t.config_key},{default:n(()=>[(s(),d(M(b(t.config_type)),O({modelValue:t.config_value,"onUpdate:modelValue":V=>t.config_value=V},{ref_for:!0},k(t)),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128))]),_:2},1032,["model"])]),_:2},1024))),128)),f("div",U,[u(p,{type:"primary",onClick:w},{default:n(()=>[...o[0]||(o[0]=[y("保存配置",-1)])]),_:1}),u(p,{onClick:C},{default:n(()=>[...o[1]||(o[1]=[y("重置",-1)])]),_:1})])])}}}),H=J(q,[["__scopeId","data-v-5b99ff0b"]]);export{H as default};
//# sourceMappingURL=config-D-D2egAp.js.map
