import{d as B,g as I,h as N,L as S,c as i,e as f,M as g,as as m,a as u,w as a,q as j,o as s,i as d,x as F,y as L,b8 as M,b9 as O,t as P,n as y,C as h,a1 as T,_ as D}from"./index-BwQzQhYQ.js";const J={class:"system-config-page"},U={class:"form-actions"},q=B({__name:"config",setup(R){const v={device_config:"设备配置",auth_config:"后台登录认证配置"},r=I([]),c=N({}),b=e=>{switch(e){case"bool":return"el-switch";case"json":case"string":return"el-input";case"int":return"el-input";default:return"el-input"}},k=e=>e.config_type==="json"?{type:"textarea",rows:3,placeholder:"JSON 格式"}:e.config_type==="int"?{type:"number"}:{};S(async()=>{const o=await(await fetch("/api/v1/admin/system/config/list")).json();r.value=o.data||[],r.value.forEach(n=>{c[n.group_key]||(c[n.group_key]=[]),c[n.group_key].push(n)})});const w=async()=>{try{const e=r.value.map(o=>({id:o.id,config_value:o.config_value}));await fetch("/api/v1/admin/system/config/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),h.success("配置保存成功")}catch{h.error("保存失败")}},C=()=>{window.location.reload()};return(e,o)=>{const n=L,x=F,E=T,p=j;return s(),i("div",J,[(s(!0),i(g,null,m(c,(_,l)=>(s(),d(E,{key:l,class:"mb-4"},{header:a(()=>[f("span",null,P(v[l]||l),1)]),default:a(()=>[u(x,{model:_,"label-width":"160px"},{default:a(()=>[(s(!0),i(g,null,m(_,t=>(s(),d(n,{key:t.config_key,label:t.description||t.config_key},{default:a(()=>[(s(),d(M(b(t.config_type)),O({modelValue:t.config_value,"onUpdate:modelValue":V=>t.config_value=V},{ref_for:!0},k(t)),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128))]),_:2},1032,["model"])]),_:2},1024))),128)),f("div",U,[u(p,{type:"primary",onClick:w},{default:a(()=>[...o[0]||(o[0]=[y("保存配置",-1)])]),_:1}),u(p,{onClick:C},{default:a(()=>[...o[1]||(o[1]=[y("重置",-1)])]),_:1})])])}}}),A=D(q,[["__scopeId","data-v-5b99ff0b"]]);export{A as default};
//# sourceMappingURL=config-C7AS0Gp5.js.map
