const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SupplierBalanceLogDetail-BOEJLR31.js","assets/index-DQjW5cRd.js","assets/index-BDOPLeYz.css","assets/SupplierBalanceLogDetail-B3Xurlrz.css","assets/loading-oV0W9nDj.css","assets/tag-CtW1DIiB.css"])))=>i.map(i=>d[i]);
import{d as Q,h as T,y as W,c as V,a as e,e as c,u as l,w as t,T as Z,C as k,F as M,s as ee,j as ae,z as te,A as le,B as oe,aG as ne,o as b,at as re,E as se,b as ie,D as pe,ap as de,aq as ue,M as w,ar as _e,l as ce,aH as me,i as fe,v as i,G as be,H as ge,J as he,K as ve,X as ye,Y as u,aF as Ce,au as Ve,aC as ke,g as we}from"./index-DQjW5cRd.js";/* empty css                   *//* empty css            *//* empty css               *//* empty css              *//* empty css                     *//* empty css                 *//* empty css             *//* empty css                          */import"./form-item-l0sNRNKZ.js";import{u as De}from"./table.plugin-DtcfBVC9.js";const xe={class:"table-com-search"},Ee={class:"table-header ba-scroll-style"},Ye={class:"table-search"},ze={style:{width:"100%","overflow-x":"auto"},class:"table-content"},Se={key:1},Te={class:"table-footer"},Me={class:"table-pagination"},Fe=Q({__name:"supplier-balance-log",setup(He){const F=re(()=>Ve(()=>import("./SupplierBalanceLogDetail-BOEJLR31.js"),__vite__mapDeps([0,1,2,3,4,5]))),g=T(null),H=(n={})=>{console.log(n),ke(()=>{g.value?g.value.open({...n}):console.error("DetailForm 组件未正确挂载！")})},{isVisible:U,toggleVisibility:B,loadData:D,data:m,refreshData:h,handleSizeChange:P,handleCurrentChange:L,searchParams:r,resetSearchParams:R}=De("/api/v1/admin/finance/supplier-balance-log");r.value.search||(r.value.search={supplier_id:"",operation_type:"",operator_type:"",operator_name:"",start_date:"",end_date:"",order_no:""});const x=T([]),A=n=>({1:"success",2:"warning",3:"info",4:"danger",5:""})[n]||"",v=n=>(n/100).toFixed(2),I=n=>new Date(n).toLocaleString("zh-CN"),N=n=>n>0?"text-success":"text-danger",O=({prop:n,order:o})=>{r.value&&(r.value.sort_field=n(r.value).sort_order=o==="ascending"?"asc":"desc",D())},G=n=>{window.open(`/order/home?search=${n}`,"_blank")},$=async()=>{try{const n=await ee.get("/api/v1/admin/supplier",{params:{page:1,page_size:1e3}});n.code===200&&(x.value=n.data.data||[])}catch(n){console.error("加载供应商列表失败:",n)}};return W(()=>{$(),D()}),(n,o)=>{const p=_e,y=de,d=pe,_=ie,E=ce,Y=se,z=me,f=ae,j=fe,q=te,s=ve,C=ye,J=le,K=oe,S=ne("permission");return b(),V(M,null,[e(l(F),{ref_key:"detailFormRef",ref:g,onRefresh:l(h)},null,8,["onRefresh"]),e(Z,{name:"fade"},{default:t(()=>[k(c("div",xe,[e(Y,{gutter:20},{default:t(()=>[e(_,{span:6},{default:t(()=>[e(d,{label:"供应商"},{default:t(()=>[e(y,{modelValue:l(r).search.supplier_id,"onUpdate:modelValue":o[0]||(o[0]=a=>l(r).search.supplier_id=a),placeholder:"选择供应商",clearable:""},{default:t(()=>[(b(!0),V(M,null,ue(x.value,a=>(b(),w(p,{key:a.id,label:a.supplier_name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,{label:"操作类型"},{default:t(()=>[e(y,{modelValue:l(r).search.operation_type,"onUpdate:modelValue":o[1]||(o[1]=a=>l(r).search.operation_type=a),placeholder:"选择操作类型",clearable:""},{default:t(()=>[e(p,{label:"预付",value:1}),e(p,{label:"下发",value:2}),e(p,{label:"订单扣款",value:3}),e(p,{label:"退款",value:4}),e(p,{label:"系统调整",value:5})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,{label:"操作人类型"},{default:t(()=>[e(y,{modelValue:l(r).search.operator_type,"onUpdate:modelValue":o[2]||(o[2]=a=>l(r).search.operator_type=a),placeholder:"选择操作人类型",clearable:""},{default:t(()=>[e(p,{label:"管理员",value:1}),e(p,{label:"系统",value:2}),e(p,{label:"订单",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,{label:"操作人"},{default:t(()=>[e(E,{modelValue:l(r).search.operator_name,"onUpdate:modelValue":o[3]||(o[3]=a=>l(r).search.operator_name=a),placeholder:"按操作人搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Y,{gutter:20},{default:t(()=>[e(_,{span:6},{default:t(()=>[e(d,{label:"开始时间"},{default:t(()=>[e(z,{modelValue:l(r).search.start_date,"onUpdate:modelValue":o[4]||(o[4]=a=>l(r).search.start_date=a),type:"datetime",placeholder:"选择开始时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,{label:"结束时间"},{default:t(()=>[e(z,{modelValue:l(r).search.end_date,"onUpdate:modelValue":o[5]||(o[5]=a=>l(r).search.end_date=a),type:"datetime",placeholder:"选择结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:t(()=>[e(d,{label:"订单号"},{default:t(()=>[e(E,{modelValue:l(r).search.order_no,"onUpdate:modelValue":o[6]||(o[6]=a=>l(r).search.order_no=a),placeholder:"按订单号搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(j,{inline:!0,class:"demo-form-inline"},{default:t(()=>[e(d,null,{default:t(()=>[e(f,{type:"primary",onClick:l(h)},{default:t(()=>[...o[9]||(o[9]=[i("搜索",-1)])]),_:1},8,["onClick"]),e(f,{type:"primary",onClick:l(R)},{default:t(()=>[...o[10]||(o[10]=[i("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})],512),[[be,l(U)]])]),_:1}),c("div",Ee,[k(e(f,{icon:l(ge),onClick:l(h),color:"#40485b"},null,8,["icon","onClick"]),[[S,"finance:supplier_balance_log:list"]]),c("div",Ye,[e(q,{class:"ml-4"},{default:t(()=>[e(f,{icon:l(he),onClick:l(B)},null,8,["icon","onClick"])]),_:1})])]),c("div",ze,[e(J,{data:l(m).data,border:"",stripe:"","max-height":"600",style:{width:"100%"},onSortChange:O},{default:t(()=>[e(s,{prop:"id",label:"记录ID",align:"center","min-width":"80",sortable:"custom"}),e(s,{prop:"supplier_name",label:"供应商",align:"center","min-width":"120"},{default:t(({row:a})=>[e(C,{type:"primary"},{default:t(()=>[i(u(a.supplier_name),1)]),_:2},1024)]),_:1}),e(s,{prop:"operation_type_text",label:"操作类型",align:"center","min-width":"100"},{default:t(({row:a})=>[e(C,{type:A(a.operation_type)},{default:t(()=>[i(u(a.operation_type_text),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"amount",label:"变动金额",align:"center","min-width":"120",sortable:"custom"},{default:t(({row:a})=>[c("span",{class:Ce(N(a.amount))}," ¥"+u(v(a.amount)),3)]),_:1}),e(s,{prop:"balance_before",label:"变动前余额",align:"center","min-width":"120",sortable:"custom"},{default:t(({row:a})=>[i(" ¥"+u(v(a.balance_before)),1)]),_:1}),e(s,{prop:"balance_after",label:"变动后余额",align:"center","min-width":"120",sortable:"custom"},{default:t(({row:a})=>[i(" ¥"+u(v(a.balance_after)),1)]),_:1}),e(s,{prop:"operator_type_text",label:"操作人类型",align:"center","min-width":"100"},{default:t(({row:a})=>[e(C,{type:a.operator_type===1?"success":a.operator_type===2?"info":"warning"},{default:t(()=>[i(u(a.operator_type_text),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"operator_name",label:"操作人",align:"center","min-width":"120"}),e(s,{prop:"order_no",label:"关联订单",align:"center","min-width":"150"},{default:t(({row:a})=>[a.order_no?(b(),w(f,{key:0,type:"primary",size:"small",onClick:X=>G(a.order_no)},{default:t(()=>[i(u(a.order_no),1)]),_:2},1032,["onClick"])):(b(),V("span",Se,"-"))]),_:1}),e(s,{prop:"remark",label:"备注",align:"center","min-width":"200","show-overflow-tooltip":""}),e(s,{prop:"created_at",label:"创建时间",align:"center","min-width":"150",sortable:"custom"},{default:t(({row:a})=>[i(u(I(a.created_at)),1)]),_:1}),e(s,{label:"操作",align:"center",fixed:"right","min-width":"120"},{default:t(a=>[k((b(),w(f,{size:"small",onClick:X=>H(a.row)},{default:t(()=>[...o[11]||(o[11]=[i("查看详情",-1)])]),_:1},8,["onClick"])),[[S,"finance:supplier_balance_log:detail"]])]),_:1})]),_:1},8,["data"])]),c("div",Te,[c("div",Me,[e(K,{"current-page":l(m).current_page,"onUpdate:currentPage":o[7]||(o[7]=a=>l(m).current_page=a),"page-size":l(m).page_size,"onUpdate:pageSize":o[8]||(o[8]=a=>l(m).page_size=a),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:l(m).page_total,onSizeChange:l(P),onCurrentChange:l(L)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}}),je=we(Fe,[["__scopeId","data-v-cbd97954"]]);export{je as default};
//# sourceMappingURL=supplier-balance-log-DkBo5AwI.js.map
