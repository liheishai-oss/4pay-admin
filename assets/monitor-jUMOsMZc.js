import{d as K,h as b,ac as U,y as Q,aK as R,c as k,e as t,a as s,w as a,x as i,aC as X,a5 as Y,o as S,E as Z,b as ee,Y as d,X as se,v as p,j as te,i as ae,k as D,D as le,l as oe,ap as ne,ar as re,F as ue,aq as de,aF as ie,aW as pe,g as me}from"./index-DQjW5cRd.js";/* empty css              *//* empty css             *//* empty css            *//* empty css               */import"./form-item-l0sNRNKZ.js";/* empty css              *//* empty css             */const ce={class:"robot-monitor"},ge={class:"card-header"},_e={class:"status-info"},ve={class:"status-item"},fe={class:"status-item"},ye={class:"status-item"},be={class:"value"},ke={class:"card-header"},Se={key:0,class:"telegram-fields"},we={class:"card-header"},Ce={class:"log-header"},Ie={class:"log-time"},Te={class:"log-content"},Ve={key:0,class:"empty-log"},Me={class:"stat-item"},We={class:"stat-value"},Ee={class:"stat-item"},xe={class:"stat-value"},Ne={class:"stat-item"},Ue={class:"stat-value"},De={class:"stat-item"},Le={class:"stat-value"},L="ws://localhost:8789",Oe=K({__name:"monitor",setup(Je){let r=null;const u=b(!1),M=b(""),l=U({groupId:"test_group_001",userId:"test_user_001",type:"telegram_message",message:"/å¸®åŠ©",telegramUpdate:JSON.stringify({update_id:123456789,message:{message_id:1,from:{id:123456789,is_bot:!1,first_name:"Test",last_name:"User",username:"testuser"},chat:{id:-0xe91e3b12d2,title:"Test Group",type:"supergroup"},date:Math.floor(Date.now()/1e3),text:"/å¸®åŠ©"}},null,2)}),_=b([]),w=b(),y=b(!0),c=U({totalMessages:0,successMessages:0,errorMessages:0,uptime:0}),E=()=>{try{r=new WebSocket(L),r.onopen=()=>{u.value=!0,M.value=new Date().toLocaleString(),g("success","WebSocketè¿æ¥å·²å»ºç«‹"),i.success("WebSocketè¿æ¥æˆåŠŸ")},r.onmessage=o=>{M.value=new Date().toLocaleString(),J(o.data)},r.onclose=()=>{u.value=!1,g("warning","WebSocketè¿æ¥å·²æ–­å¼€"),i.warning("WebSocketè¿æ¥æ–­å¼€")},r.onerror=o=>{u.value=!1,g("error","WebSocketè¿æ¥é”™è¯¯: "+o),i.error("WebSocketè¿æ¥é”™è¯¯")}}catch(o){g("error","è¿æ¥WebSocketå¤±è´¥: "+o),i.error("è¿æ¥WebSocketå¤±è´¥")}},x=()=>{r&&(r.close(),r=null)},O=()=>{u.value?x():E()},J=o=>{try{const e=JSON.parse(o);g("info",JSON.stringify(e,null,2)),c.totalMessages++,(e.type==="telegram_message_result"||e.type==="group_message_result")&&(e.success?c.successMessages++:c.errorMessages++)}catch(e){g("error","è§£ææ¶ˆæ¯å¤±è´¥: "+e+`
åŸå§‹æ•°æ®: `+o)}},h=()=>{if(!u.value){i.error("WebSocketæœªè¿æ¥");return}if(!l.message.trim()){i.error("è¯·è¾“å…¥æ¶ˆæ¯å†…å®¹");return}const o={type:l.type,message:l.message,group_id:l.groupId,user_id:l.userId};r==null||r.send(JSON.stringify(o)),g("sent","å‘é€æ¶ˆæ¯: "+JSON.stringify(o,null,2)),i.success("æ¶ˆæ¯å‘é€æˆåŠŸ")},N=o=>{if(!u.value){i.error("WebSocketæœªè¿æ¥");return}let e={};switch(o){case"help":e={type:"group_message",message:"/å¸®åŠ©",group_id:l.groupId,user_id:l.userId};break;case"ping":e={type:"ping"};break;case"status":e={type:"get_status"};break}r==null||r.send(JSON.stringify(e)),g("sent","å‘é€å¿«é€Ÿå‘½ä»¤: "+JSON.stringify(e,null,2)),i.success("å¿«é€Ÿå‘½ä»¤å‘é€æˆåŠŸ")},g=(o,e)=>{_.value.push({timestamp:new Date().toLocaleString(),type:o,content:e}),_.value.length>1e3&&(_.value=_.value.slice(-500)),y.value&&X(()=>{w.value&&(w.value.scrollTop=w.value.scrollHeight)})},F=()=>{_.value=[],i.success("æ—¥å¿—å·²æ¸…ç©º")},z=()=>{y.value=!y.value,i.info(y.value?"å·²å¼€å¯è‡ªåŠ¨æ»šåŠ¨":"å·²å…³é—­è‡ªåŠ¨æ»šåŠ¨")},B=()=>{l.groupId="test_group_001",l.userId="test_user_001",l.type="group_message",l.message=""},A=o=>({success:"success",error:"danger",warning:"warning",info:"info",sent:"primary"})[o]||"info",P=o=>({success:"æˆåŠŸ",error:"é”™è¯¯",warning:"è­¦å‘Š",info:"ä¿¡æ¯",sent:"å‘é€"})[o]||"æœªçŸ¥",$=()=>{setInterval(()=>{c.uptime++},1e3)};return Q(()=>{E(),$()}),R(()=>{x()}),(o,e)=>{const v=te,C=se,m=ee,W=Z,I=Y,T=oe,f=le,V=re,j=ne,q=ae,G=pe;return S(),k("div",ce,[e[26]||(e[26]=t("div",{class:"page-header"},[t("h1",null,"ğŸ¤– Telegramæœºå™¨äººæ¶ˆæ¯ç›‘æ§"),t("p",null,"å®æ—¶ç›‘æ§Telegramæœºå™¨äººæ¶ˆæ¯å¤„ç†çŠ¶æ€å’Œç»“æœ")],-1)),s(I,{class:"connection-status",shadow:"never"},{header:a(()=>[t("div",ge,[e[7]||(e[7]=t("span",null,"ğŸ“¡ è¿æ¥çŠ¶æ€",-1)),s(v,{type:u.value?"success":"danger",icon:u.value?"Check":"Close",onClick:O},{default:a(()=>[p(d(u.value?"å·²è¿æ¥":"æœªè¿æ¥"),1)]),_:1},8,["type","icon"])])]),default:a(()=>[t("div",_e,[s(W,{gutter:20},{default:a(()=>[s(m,{span:8},{default:a(()=>[t("div",{class:"status-item"},[e[8]||(e[8]=t("span",{class:"label"},"WebSocketåœ°å€:",-1)),t("span",{class:"value"},d(L))]),t("div",ve,[e[10]||(e[10]=t("span",{class:"label"},"Telegramæ”¯æŒ:",-1)),s(C,{type:"success"},{default:a(()=>[...e[9]||(e[9]=[p("å·²å¯ç”¨",-1)])]),_:1})])]),_:1}),s(m,{span:8},{default:a(()=>[t("div",fe,[e[11]||(e[11]=t("span",{class:"label"},"è¿æ¥çŠ¶æ€:",-1)),s(C,{type:u.value?"success":"danger"},{default:a(()=>[p(d(u.value?"å·²è¿æ¥":"æœªè¿æ¥"),1)]),_:1},8,["type"])])]),_:1}),s(m,{span:8},{default:a(()=>[t("div",ye,[e[12]||(e[12]=t("span",{class:"label"},"æœ€åæ´»åŠ¨:",-1)),t("span",be,d(M.value||"æ— "),1)])]),_:1})]),_:1})])]),_:1}),s(I,{class:"message-sender",shadow:"never"},{header:a(()=>[t("div",ke,[e[14]||(e[14]=t("span",null,"ğŸ“¤ å‘é€æµ‹è¯•æ¶ˆæ¯",-1)),s(C,{type:"info"},{default:a(()=>[...e[13]||(e[13]=[p("æ”¯æŒTelegramç¾¤ç»„æ¶ˆæ¯",-1)])]),_:1})])]),default:a(()=>[s(q,{model:l,"label-width":"100px"},{default:a(()=>[s(W,{gutter:20},{default:a(()=>[s(m,{span:8},{default:a(()=>[s(f,{label:"ç¾¤ç»„ID"},{default:a(()=>[s(T,{modelValue:l.groupId,"onUpdate:modelValue":e[0]||(e[0]=n=>l.groupId=n),placeholder:"è¾“å…¥ç¾¤ç»„ID"},null,8,["modelValue"])]),_:1})]),_:1}),s(m,{span:8},{default:a(()=>[s(f,{label:"ç”¨æˆ·ID"},{default:a(()=>[s(T,{modelValue:l.userId,"onUpdate:modelValue":e[1]||(e[1]=n=>l.userId=n),placeholder:"è¾“å…¥ç”¨æˆ·ID"},null,8,["modelValue"])]),_:1})]),_:1}),s(m,{span:8},{default:a(()=>[s(f,{label:"æ¶ˆæ¯ç±»å‹"},{default:a(()=>[s(j,{modelValue:l.type,"onUpdate:modelValue":e[2]||(e[2]=n=>l.type=n),placeholder:"é€‰æ‹©æ¶ˆæ¯ç±»å‹"},{default:a(()=>[s(V,{label:"Telegramæ¶ˆæ¯",value:"telegram_message"}),s(V,{label:"ç¾¤æ¶ˆæ¯",value:"group_message"}),s(V,{label:"Ping",value:"ping"}),s(V,{label:"è·å–çŠ¶æ€",value:"get_status"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(f,{label:"æ¶ˆæ¯å†…å®¹"},{default:a(()=>[s(T,{modelValue:l.message,"onUpdate:modelValue":e[3]||(e[3]=n=>l.message=n),type:"textarea",rows:3,placeholder:"è¾“å…¥æ¶ˆæ¯å†…å®¹ï¼Œæ”¯æŒTelegramæœºå™¨äººå‘½ä»¤å¦‚: /å¸®åŠ©, /é¢„ä»˜+100, /ä¸‹å‘-50, /æŸ¥ä½™é¢, /æŸ¥æˆç‡1"},null,8,["modelValue"])]),_:1}),l.type==="telegram_message"?(S(),k("div",Se,[s(f,{label:"Telegramæ›´æ–°æ•°æ®"},{default:a(()=>[s(T,{modelValue:l.telegramUpdate,"onUpdate:modelValue":e[4]||(e[4]=n=>l.telegramUpdate=n),type:"textarea",rows:4,placeholder:"è¾“å…¥Telegram Webhookæ›´æ–°æ•°æ® (JSONæ ¼å¼)"},null,8,["modelValue"])]),_:1})])):D("",!0),s(f,null,{default:a(()=>[s(v,{type:"primary",onClick:h,disabled:!u.value},{default:a(()=>[...e[15]||(e[15]=[p(" å‘é€æ¶ˆæ¯ ",-1)])]),_:1},8,["disabled"]),s(v,{onClick:B},{default:a(()=>[...e[16]||(e[16]=[p("æ¸…ç©ºè¡¨å•",-1)])]),_:1}),s(v,{type:"success",onClick:e[5]||(e[5]=n=>N("help"))},{default:a(()=>[...e[17]||(e[17]=[p("å‘é€å¸®åŠ©å‘½ä»¤",-1)])]),_:1}),s(v,{type:"warning",onClick:e[6]||(e[6]=n=>N("ping"))},{default:a(()=>[...e[18]||(e[18]=[p("å‘é€Ping",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s(I,{class:"message-log",shadow:"never"},{header:a(()=>[t("div",we,[e[20]||(e[20]=t("span",null,"ğŸ“‹ æ¶ˆæ¯æ—¥å¿—",-1)),t("div",null,[s(v,{size:"small",onClick:F},{default:a(()=>[...e[19]||(e[19]=[p("æ¸…ç©ºæ—¥å¿—",-1)])]),_:1}),s(v,{size:"small",onClick:z},{default:a(()=>[p(d(y.value?"å…³é—­è‡ªåŠ¨æ»šåŠ¨":"å¼€å¯è‡ªåŠ¨æ»šåŠ¨"),1)]),_:1})])])]),default:a(()=>[t("div",{class:"log-container",ref_key:"logContainer",ref:w},[(S(!0),k(ue,null,de(_.value,(n,H)=>(S(),k("div",{key:H,class:ie(["log-item",n.type])},[t("div",Ce,[t("span",Ie,d(n.timestamp),1),s(C,{type:A(n.type),size:"small"},{default:a(()=>[p(d(P(n.type)),1)]),_:2},1032,["type"])]),t("div",Te,[t("pre",null,d(n.content),1)])],2))),128)),_.value.length===0?(S(),k("div",Ve,[s(G,{description:"æš‚æ— æ¶ˆæ¯æ—¥å¿—"})])):D("",!0)],512)]),_:1}),s(I,{class:"statistics",shadow:"never"},{header:a(()=>[...e[21]||(e[21]=[t("div",{class:"card-header"},[t("span",null,"ğŸ“Š ç»Ÿè®¡ä¿¡æ¯")],-1)])]),default:a(()=>[s(W,{gutter:20},{default:a(()=>[s(m,{span:6},{default:a(()=>[t("div",Me,[t("div",We,d(c.totalMessages),1),e[22]||(e[22]=t("div",{class:"stat-label"},"æ€»æ¶ˆæ¯æ•°",-1))])]),_:1}),s(m,{span:6},{default:a(()=>[t("div",Ee,[t("div",xe,d(c.successMessages),1),e[23]||(e[23]=t("div",{class:"stat-label"},"æˆåŠŸæ¶ˆæ¯",-1))])]),_:1}),s(m,{span:6},{default:a(()=>[t("div",Ne,[t("div",Ue,d(c.errorMessages),1),e[24]||(e[24]=t("div",{class:"stat-label"},"é”™è¯¯æ¶ˆæ¯",-1))])]),_:1}),s(m,{span:6},{default:a(()=>[t("div",De,[t("div",Le,d(c.uptime),1),e[25]||(e[25]=t("div",{class:"stat-label"},"è¿è¡Œæ—¶é—´(ç§’)",-1))])]),_:1})]),_:1})]),_:1})])}}}),qe=me(Oe,[["__scopeId","data-v-c44f2176"]]);export{qe as default};
//# sourceMappingURL=monitor-jUMOsMZc.js.map
