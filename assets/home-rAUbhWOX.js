const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/edit-T90rdefR.js","assets/index-Dwi2X-zo.js","assets/index-0hRBKvrI.css","assets/merchant-CXp2HBYs.js","assets/edit-CNyvggb3.css","assets/loading-oV0W9nDj.css","assets/product-management-D9FMFW9q.js","assets/product-aoAQyEbo.js","assets/product-management-C7jJiffk.css","assets/table-column-DHEyVPoW.css","assets/checkbox-CXazyT-T.css","assets/input-number-CWqCFpc2.css"])))=>i.map(i=>d[i]);
import{d as me,g as b,L as _e,c as N,a as t,e as o,u as n,w as l,T as fe,Q as u,i as m,M as ve,q as ge,C as ye,N as he,O as be,P as we,aG as Ce,o as c,av as L,j as ke,a1 as Ee,z as Ve,n as s,x as ze,E as xe,b as Re,y as Se,ar as Pe,at as De,k as Fe,V as F,S as O,ai as Ie,R as $e,U as Ae,aI as Te,aJ as Ue,W as Be,t as z,X as Me,aw as j,D as I,_ as Ne}from"./index-Dwi2X-zo.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                 */import{u as Le}from"./table.plugin-CUQXsWP8.js";const Oe={key:0,class:"api-docs-content"},je={class:"info-item"},Ge={class:"copy-field"},Ke={class:"info-item"},qe={class:"copy-field"},Je={class:"endpoint-item"},Qe={class:"copy-field"},We={class:"endpoint-item"},Xe={class:"copy-field"},He={class:"dialog-footer"},Ye={class:"table-com-search"},Ze={class:"search-header"},et={class:"search-title"},tt={class:"search-buttons"},lt={class:"table-header ba-scroll-style"},at={class:"table-search"},nt={style:{width:"100%","overflow-x":"auto"},class:"table-content"},ot={class:"table-footer"},st={class:"table-pagination"},it=me({__name:"home",setup(dt){const G=L(()=>j(()=>import("./edit-T90rdefR.js"),__vite__mapDeps([0,1,2,3,4,5]))),w=b(null),$=(d={})=>{console.log("🔍 openEditFrom called",{row:d,editFormRef:w.value,hasEditFormRef:!!w.value}),w.value?(console.log("✅ Calling editFormRef.value.open"),w.value.open({...d})):console.error("❌ editFormRef.value is null - 组件可能未正确加载")},K=L(()=>j(()=>import("./product-management-D9FMFW9q.js"),__vite__mapDeps([6,1,2,3,7,8,5,9,10,11]))),x=b(null),q=d=>{x.value&&x.value.open({id:d.id,merchant_name:d.merchant_name})},{handleSelectionChange:J,hasSelectedRows:A,isVisible:Q,toggleVisibility:T,loadData:W,data:f,refreshData:C,handleSizeChange:X,handleCurrentChange:H,searchParams:U,deleteRows:B,toggleSwitch:Y}=Le("/api/v1/admin/merchant"),_=b({login_account:"",status:""}),R=b(!1),Z=async()=>{R.value=!0;try{U.value={..._.value},await C()}catch(d){console.error("搜索失败:",d),I.error("搜索失败，请重试")}finally{R.value=!1}},ee=()=>{_.value={login_account:"",status:""},U.value={..._.value},C()},k=d=>(d/100).toFixed(2),E=b(!1),v=b(null),te=d=>{v.value=d,E.value=!0},V=async(d,e)=>{try{await navigator.clipboard.writeText(d),I.success(`${e}已复制到剪贴板`)}catch{I.error("复制失败")}};_e(()=>{W()});const le=()=>{console.log("批量编辑")},ae=(d,e)=>{B(d,[e.id])},ne=d=>{B(d)};return(d,e)=>{const g=Ve,i=ge,S=Ee,oe=ye,y=Fe,P=Se,D=Re,M=De,se=Pe,ie=xe,de=ze,re=he,r=Be,ue=Me,pe=be,ce=we,p=Ce("permission");return c(),N(ve,null,[t(n(G),{ref_key:"editFormRef",ref:w,onRefresh:n(C)},null,8,["onRefresh"]),t(n(K),{ref_key:"productManagementRef",ref:x},null,512),t(oe,{modelValue:E.value,"onUpdate:modelValue":e[5]||(e[5]=a=>E.value=a),title:"对接资料",width:"600px","close-on-click-modal":!1},{footer:l(()=>[o("div",He,[t(i,{onClick:e[4]||(e[4]=a=>E.value=!1)},{default:l(()=>[...e[21]||(e[21]=[s("关闭",-1)])]),_:1})])]),default:l(()=>[v.value?(c(),N("div",Oe,[t(S,{class:"api-info-card",shadow:"never"},{header:l(()=>[...e[11]||(e[11]=[o("div",{class:"card-header"},[o("span",null,"对接信息")],-1)])]),default:l(()=>[o("div",je,[e[13]||(e[13]=o("label",null,"商户Key：",-1)),o("div",Ge,[t(g,{value:v.value.merchant_key,readonly:"",class:"copy-input"},null,8,["value"]),t(i,{type:"primary",size:"small",onClick:e[0]||(e[0]=a=>V(v.value.merchant_key,"商户Key"))},{default:l(()=>[...e[12]||(e[12]=[s(" 复制 ",-1)])]),_:1})])]),o("div",Ke,[e[15]||(e[15]=o("label",null,"商户秘钥：",-1)),o("div",qe,[t(g,{value:v.value.merchant_secret,readonly:"",class:"copy-input",type:"password","show-password":""},null,8,["value"]),t(i,{type:"primary",size:"small",onClick:e[1]||(e[1]=a=>V(v.value.merchant_secret,"商户秘钥"))},{default:l(()=>[...e[14]||(e[14]=[s(" 复制 ",-1)])]),_:1})])])]),_:1}),t(S,{class:"api-endpoints-card",shadow:"never"},{header:l(()=>[...e[16]||(e[16]=[o("div",{class:"card-header"},[o("span",null,"API接口")],-1)])]),default:l(()=>[o("div",Je,[e[18]||(e[18]=o("label",null,"API网关：",-1)),o("div",Qe,[t(g,{value:"https://api.baiyi-pay.com",readonly:"",class:"copy-input"}),t(i,{type:"primary",size:"small",onClick:e[2]||(e[2]=a=>V("https://api.baiyi-pay.com","API网关"))},{default:l(()=>[...e[17]||(e[17]=[s(" 复制 ",-1)])]),_:1})])]),o("div",We,[e[20]||(e[20]=o("label",null,"API文档：",-1)),o("div",Xe,[t(g,{value:"https://www.baiyi-pay.com/docs.html",readonly:"",class:"copy-input"}),t(i,{type:"primary",size:"small",onClick:e[3]||(e[3]=a=>V("https://www.baiyi-pay.com/docs.html","API文档"))},{default:l(()=>[...e[19]||(e[19]=[s(" 复制 ",-1)])]),_:1})])])]),_:1})])):ke("",!0)]),_:1},8,["modelValue"]),t(fe,{name:"fade"},{default:l(()=>[u(o("div",Ye,[t(S,{class:"search-card",shadow:"never"},{header:l(()=>[o("div",Ze,[o("span",et,[t(y,null,{default:l(()=>[t(n(F))]),_:1}),e[22]||(e[22]=s(" 商户搜索 ",-1))]),t(i,{type:"text",onClick:n(T),class:"close-btn"},{default:l(()=>[t(y,null,{default:l(()=>[t(n(Ie))]),_:1})]),_:1},8,["onClick"])])]),default:l(()=>[t(de,{model:_.value,"label-width":"120px",class:"search-form"},{default:l(()=>[t(ie,{gutter:20},{default:l(()=>[t(D,{span:6},{default:l(()=>[t(P,{label:"登录账号"},{default:l(()=>[t(g,{modelValue:_.value.login_account,"onUpdate:modelValue":e[6]||(e[6]=a=>_.value.login_account=a),placeholder:"请输入登录账号",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),t(D,{span:6},{default:l(()=>[t(P,{label:"状态"},{default:l(()=>[t(se,{modelValue:_.value.status,"onUpdate:modelValue":e[7]||(e[7]=a=>_.value.status=a),placeholder:"请选择状态",clearable:"",style:{width:"100%"}},{default:l(()=>[t(M,{label:"启用",value:1}),t(M,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(D,{span:6},{default:l(()=>[t(P,null,{default:l(()=>[o("div",tt,[t(i,{type:"primary",onClick:Z,loading:R.value},{default:l(()=>[t(y,null,{default:l(()=>[t(n(F))]),_:1}),e[23]||(e[23]=s(" 搜索 ",-1))]),_:1},8,["loading"]),t(i,{onClick:ee},{default:l(()=>[t(y,null,{default:l(()=>[t(n(O))]),_:1}),e[24]||(e[24]=s(" 重置 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[$e,n(Q)]])]),_:1}),o("div",lt,[u(t(i,{icon:n(O),onClick:n(C),color:"#40485b"},null,8,["icon","onClick"]),[[p,"merchant:list"]]),u((c(),m(i,{type:"primary",icon:n(Ae),onClick:$},{default:l(()=>[...e[25]||(e[25]=[s("添加",-1)])]),_:1},8,["icon"])),[[p,"merchant:add"]]),u((c(),m(i,{type:"primary",disabled:!n(A),onClick:le},{default:l(()=>[...e[26]||(e[26]=[s("编辑",-1)])]),_:1},8,["disabled"])),[[p,"merchant:edit"]]),u((c(),m(i,{type:"danger",disabled:!n(A),onClick:e[8]||(e[8]=a=>ne("/api/v1/admin/merchant/delete"))},{default:l(()=>[...e[27]||(e[27]=[s("删除",-1)])]),_:1},8,["disabled"])),[[p,"merchant:delete"]]),u((c(),m(i,{type:"primary"},{default:l(()=>[e[28]||(e[28]=s(" 导入",-1)),t(y,{class:"el-icon--right"},{default:l(()=>[t(n(Te))]),_:1})]),_:1})),[[p,"merchant:import"]]),u((c(),m(i,{type:"primary"},{default:l(()=>[e[29]||(e[29]=s(" 导出",-1)),t(y,{class:"el-icon--right"},{default:l(()=>[t(n(Ue))]),_:1})]),_:1})),[[p,"merchant:export"]]),o("div",at,[t(re,{class:"ml-4"},{default:l(()=>[t(i,{icon:n(F),onClick:n(T)},null,8,["icon","onClick"])]),_:1})])]),o("div",nt,[t(pe,{data:n(f).data,border:"",stripe:"","table-layout":"fixed",style:{width:"100%"},onSelectionChange:n(J)},{default:l(()=>[t(r,{type:"selection",width:"40"}),t(r,{prop:"merchant_name",label:"商户名称",align:"center","min-width":"150"}),t(r,{prop:"login_account",label:"登录账号",align:"center","min-width":"120"}),t(r,{label:"金额信息",align:"center","min-width":"200"},{default:l(()=>[t(r,{prop:"withdrawable_amount",label:"可提金额",width:"100",align:"center"},{default:l(({row:a})=>[s(z(k(a.withdrawable_amount))+"元 ",1)]),_:1}),t(r,{prop:"frozen_amount",label:"冻结金额",width:"100",align:"center"},{default:l(({row:a})=>[s(z(k(a.frozen_amount))+"元 ",1)]),_:1})]),_:1}),t(r,{label:"预付信息",align:"center","min-width":"200"},{default:l(()=>[t(r,{prop:"prepayment_total",label:"预付总额",width:"100",align:"center"},{default:l(({row:a})=>[s(z(k(a.prepayment_total))+"元 ",1)]),_:1}),t(r,{prop:"prepayment_remaining",label:"剩余预付",width:"100",align:"center"},{default:l(({row:a})=>[s(z(k(a.prepayment_remaining))+"元 ",1)]),_:1})]),_:1}),t(r,{label:"状态",align:"center","min-width":"80"},{default:l(({row:a})=>[u(t(ue,{modelValue:a.status,"onUpdate:modelValue":h=>a.status=h,"active-value":1,"inactive-value":0,onChange:h=>n(Y)("/api/v1/admin/merchant/status-switch",a.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[p,"merchant:toggle_status"]])]),_:1}),t(r,{prop:"created_at",label:"创建时间",align:"center","min-width":"160"}),t(r,{label:"操作",align:"center",fixed:"right","min-width":"360"},{default:l(a=>[u((c(),m(i,{size:"small",onClick:h=>$(a.row)},{default:l(()=>[...e[30]||(e[30]=[s("编辑",-1)])]),_:1},8,["onClick"])),[[p,"merchant:edit"]]),u((c(),m(i,{size:"small",type:"info",onClick:h=>te(a.row)},{default:l(()=>[...e[31]||(e[31]=[s("对接资料",-1)])]),_:1},8,["onClick"])),[[p,"merchant:api_docs"]]),u((c(),m(i,{size:"small",type:"success",onClick:h=>q(a.row)},{default:l(()=>[...e[32]||(e[32]=[s("产品管理",-1)])]),_:1},8,["onClick"])),[[p,"merchant:product_management"]]),u((c(),m(i,{size:"small",type:"danger",onClick:h=>ae("/api/v1/admin/merchant/delete",a.row)},{default:l(()=>[...e[33]||(e[33]=[s("删除",-1)])]),_:1},8,["onClick"])),[[p,"merchant:delete"]])]),_:1})]),_:1},8,["data","onSelectionChange"])]),o("div",ot,[o("div",st,[t(ce,{"current-page":n(f).current_page,"onUpdate:currentPage":e[9]||(e[9]=a=>n(f).current_page=a),"page-size":n(f).page_size,"onUpdate:pageSize":e[10]||(e[10]=a=>n(f).page_size=a),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:n(f).page_total,onSizeChange:n(X),onCurrentChange:n(H)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}}),ft=Ne(it,[["__scopeId","data-v-45fb3487"]]);export{ft as default};
//# sourceMappingURL=home-rAUbhWOX.js.map
