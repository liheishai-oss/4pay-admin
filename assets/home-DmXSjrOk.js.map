{"version":3,"file":"home-DmXSjrOk.js","sources":["../../src/pages/admin/rule/home.vue"],"sourcesContent":["<template>\n  <!-- 添加租户对话框 -->\n  <EditForm ref=\"editFormRef\" @refresh=\"refreshData\"/>\n  <!-- 搜索菜单部分的过渡效果 -->\n  <transition name=\"fade\">\n    <div class=\"table-com-search\" v-show=\"showSearch\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <el-form-item label=\"编号\">\n            <el-input placeholder=\"按编号搜索\" clearable />\n          </el-form-item>\n        </el-col>\n      </el-row>\n\n      <!-- 搜索按钮和重置按钮 -->\n      <el-form :inline=\"true\" class=\"demo-form-inline\">\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"refreshData\">搜索</el-button>\n          <el-button type=\"primary\" @click=\"resetSearchParams\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </transition>\n\n  <!-- 表头 -->\n  <div class=\"table-header ba-scroll-style\">\n    <!-- 刷新、添加、编辑、删除和导入导出按钮 -->\n    <el-button :icon=\"Refresh\" @click=\"refreshData\"  color=\"#40485b\"/>\n    <el-button type=\"primary\" :icon=\"Plus\" @click=\"openEditFrom\">添加</el-button>\n    <el-button type=\"primary\" :disabled=\"!hasSelectedRows\">编辑</el-button>\n    <el-button type=\"danger\" :disabled=\"!hasSelectedRows\"  @click=\"handleBatchDelete('/api/v1/admin/menu-rule/delete')\" >删除</el-button>\n\n    <!-- 搜索按钮 -->\n    <div class=\"table-search\">\n      <el-button-group class=\"ml-4\">\n        <el-button :icon=\"Search\" @click=\"toggleSearch\" />\n      </el-button-group>\n    </div>\n  </div>\n\n  <!-- 表格内容 -->\n  <div style=\"width: 100%; overflow-x: auto;\" class=\"table-content\">\n    <el-table\n        :data=\"data.data\"\n        border\n        stripe\n\n        row-key=\"id\"\n        table-layout=\"fixed\"\n        style=\"width: 100%;\" @selection-change=\"handleSelectionChange\">\n      <!-- 表格列定义 -->\n      <el-table-column type=\"selection\" width=\"40\" />\n      <!--      <el-table-column prop=\"id\" label=\"编号\" align=\"center\" min-width=\"80\"/>-->\n      <el-table-column prop=\"title\" label=\"权限名称\" align=\"center\" min-width=\"150\"/>\n      <el-table-column prop=\"is_menu\" label=\"类型\" align=\"center\" min-width=\"150\">\n        <template #default=\"{ row }\">\n          <el-tag :type=\"row.is_menu === 1 ? 'success' : 'info'\">\n            {{ row.is_menu === 1 ? '菜单' : '节点' }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"rule\" label=\"规则\" align=\"center\" min-width=\"150\"/>\n      <el-table-column prop=\"path\" label=\"前端路径\" align=\"center\" min-width=\"200\"/>\n      <el-table-column prop=\"weight\" label=\"权重\" align=\"center\" min-width=\"150\"/>\n      <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" min-width=\"150\"/>\n\n\n      <!-- 状态列 -->\n      <el-table-column label=\"状态\" align=\"center\" min-width=\"80\">\n        <template #default=\"{ row }\">\n          <el-switch v-model=\"row.status\" :active-value=\"1\" :inactive-value=\"0\" />\n        </template>\n      </el-table-column>\n\n\n      <!-- 操作列 -->\n      <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" min-width=\"300\">\n        <template #default=\"scope\">\n          <el-button size=\"small\"  @click=\"openEditFrom(scope.row)\">编辑</el-button>\n          <el-button size=\"small\" type=\"danger\"  @click=\"handleDelete('/api/v1/admin/menu-rule/delete', scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n\n\n\n\n\n  <!-- 表格分页 -->\n  <div class=\"table-footer\">\n    <div class=\"table-pagination\">\n      <el-pagination\n          v-model:current-page=\"data.current_page\"\n          v-model:page-size=\"data.page_size\"\n          :page-sizes=\"[10, 50, 100, 200]\"\n          :background=\"true\"\n          prev-text=\"上一页\"\n          next-text=\"下一页\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"data.page_total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { Plus, Refresh,Search } from '@element-plus/icons-vue';\nimport { ref, onMounted } from 'vue';\n\n\n// 引入自定义插件和 API\nimport { useTableDataPlugin } from \"@/utils/plugins/table.plugin.ts\";\n// import {getChildren} from \"@/api/rule.ts\";\nimport EditForm from \"./edit.vue\";\n\nconst editFormRef = ref(null);\nconst openEditFrom = (row = {}) => {\n  console.log(row);\n  if (editFormRef.value) {\n    editFormRef.value.open({ ...row}); // 传递 `row` 作为参数\n  } else {\n    console.error(\"ComplaintForm 组件未正确挂载！\");\n  }\n};\n// 使用表格插件来管理表格的状态、数据等\nconst {\n  handleSelectionChange,\n  hasSelectedRows,\n  isVisible: showSearch,\n  toggleVisibility: toggleSearch,\n  loadData,\n  data,\n  refreshData,\n  handleSizeChange,\n  handleCurrentChange,\n  // searchParams,\n  deleteRows,\n  resetSearchParams\n} = useTableDataPlugin(\"/api/v1/admin/menu-rule\");\n\n// 在组件挂载时加载数据\nonMounted(() => {\n  loadData();\n});\n// interface Group {\n//   id: number\n//   date: string\n//   name: string\n//   address: string\n//   has_children?: boolean\n//   children?: Group[]\n// }\n\n// const load = async (\n//     row: Group,\n//     _: unknown,\n//     resolve: (data: Group[]) => void\n// ) => {\n//   const res = await getChildren(row.id);\n//   console.log(\"API 请求返回数据:\", res.data);\n//   resolve(res.data);\n// }\n\n// 控制对话框的显示与隐藏\n// const dialogFormVisible = ref(false);\n\n// 编辑和删除操作\n// const handleEdit = (index: number, row: any) => {\n//   console.log('编辑', index, row);\n// };\n\n// 删除方法：单条删除\nconst handleDelete = (api: string, row: any) => {\n  deleteRows(api,[row.id]);  // 传递一个 id 数组来删除单条记录\n};\n\n// 批量删除\nconst handleBatchDelete = (api: string,) => {\n  deleteRows(api);\n};\n\n</script>\n"],"names":["editFormRef","ref","openEditFrom","row","handleSelectionChange","hasSelectedRows","showSearch","toggleSearch","loadData","data","refreshData","handleSizeChange","handleCurrentChange","deleteRows","resetSearchParams","useTableDataPlugin","onMounted","handleDelete","api","handleBatchDelete","_createVNode","EditForm","_unref","_Transition","_withDirectives","_createElementVNode","_hoisted_1","_component_el_row","_component_el_col","_component_el_form_item","_component_el_input","_component_el_form","_component_el_button","_cache","_hoisted_2","Refresh","Plus","_hoisted_3","_component_el_button_group","Search","_hoisted_4","_component_el_table","_component_el_table_column","_withCtx","_component_el_tag","_createTextVNode","_toDisplayString","_component_el_switch","$event","scope","_hoisted_5","_hoisted_6","_component_el_pagination"],"mappings":"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"}