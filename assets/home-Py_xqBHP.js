import{d as Q,g as b,L as W,c as X,a as e,e as r,u as t,w as l,T as A,M as H,q as J,N as K,O as Y,P as Z,o as ee,Q as ae,a1 as le,x as te,E as ne,b as oe,y as se,z as ie,n as u,k as re,V as C,S,ai as de,R as ue,U as ce,W as pe,X as me,_ as _e}from"./index-BwQzQhYQ.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                 */import{u as fe}from"./table.plugin-BNLAncCQ.js";import{_ as ge}from"./edit.vue_vue_type_style_index_0_lang-CCCWJcFO.js";/* empty css                     *//* empty css                    *//* empty css             */const he={class:"table-com-search"},ve={class:"search-header"},be={class:"search-title"},Ce={class:"search-buttons"},we={class:"table-header ba-scroll-style"},ke={class:"table-search"},ye={style:{width:"100%","overflow-x":"auto"},class:"table-content"},xe={class:"table-footer"},Ee={class:"table-pagination"},Ve=Q({__name:"home",setup(Se){const f=b(null),w=(s={})=>{console.log(s),f.value?f.value.open({...s}):console.error("ComplaintForm 组件未正确挂载！")},{handleSelectionChange:z,hasSelectedRows:k,isVisible:R,toggleVisibility:y,loadData:U,data:c,refreshData:p,handleSizeChange:F,handleCurrentChange:B,searchParams:x,deleteRows:E,toggleSwitch:D}=fe("/api/v1/admin/user/index"),d=b({nickname:"",username:""}),g=b(!1),T=async()=>{g.value=!0;try{x.value={...d.value},await p()}catch(s){console.error("搜索失败:",s),ElMessage.error("搜索失败，请重试")}finally{g.value=!1}},P=()=>{d.value={nickname:"",username:""},x.value={...d.value},p()};W(()=>{U()});const $=(s,a)=>{E(s,[a.id])},I=s=>{E(s)};return(s,a)=>{const m=re,o=J,V=ie,h=se,v=oe,N=ne,M=te,L=le,j=K,i=pe,q=me,G=Y,O=Z;return ee(),X(H,null,[e(ge,{ref_key:"editFormRef",ref:f,onRefresh:t(p)},null,8,["onRefresh"]),e(A,{name:"fade"},{default:l(()=>[ae(r("div",he,[e(L,{class:"search-card",shadow:"never"},{header:l(()=>[r("div",ve,[r("span",be,[e(m,null,{default:l(()=>[e(t(C))]),_:1}),a[5]||(a[5]=u(" 用户搜索 ",-1))]),e(o,{type:"text",onClick:t(y),class:"close-btn"},{default:l(()=>[e(m,null,{default:l(()=>[e(t(de))]),_:1})]),_:1},8,["onClick"])])]),default:l(()=>[e(M,{model:d.value,"label-width":"100px",class:"search-form"},{default:l(()=>[e(N,{gutter:20},{default:l(()=>[e(v,{span:6},{default:l(()=>[e(h,{label:"昵称"},{default:l(()=>[e(V,{modelValue:d.value.nickname,"onUpdate:modelValue":a[0]||(a[0]=n=>d.value.nickname=n),placeholder:"请输入昵称",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:6},{default:l(()=>[e(h,{label:"账号"},{default:l(()=>[e(V,{modelValue:d.value.username,"onUpdate:modelValue":a[1]||(a[1]=n=>d.value.username=n),placeholder:"请输入账号",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:6},{default:l(()=>[e(h,null,{default:l(()=>[r("div",Ce,[e(o,{type:"primary",onClick:T,loading:g.value},{default:l(()=>[e(m,null,{default:l(()=>[e(t(C))]),_:1}),a[6]||(a[6]=u(" 搜索 ",-1))]),_:1},8,["loading"]),e(o,{onClick:P},{default:l(()=>[e(m,null,{default:l(()=>[e(t(S))]),_:1}),a[7]||(a[7]=u(" 重置 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[ue,t(R)]])]),_:1}),r("div",we,[e(o,{icon:t(S),onClick:t(p),color:"#40485b"},null,8,["icon","onClick"]),e(o,{type:"primary",icon:t(ce),onClick:w},{default:l(()=>[...a[8]||(a[8]=[u("添加",-1)])]),_:1},8,["icon"]),e(o,{type:"primary",disabled:!t(k)},{default:l(()=>[...a[9]||(a[9]=[u("编辑",-1)])]),_:1},8,["disabled"]),e(o,{type:"danger",disabled:!t(k),onClick:a[2]||(a[2]=n=>I("/api/v1/admin/user/delete"))},{default:l(()=>[...a[10]||(a[10]=[u("删除",-1)])]),_:1},8,["disabled"]),r("div",ke,[e(j,{class:"ml-4"},{default:l(()=>[e(o,{icon:t(C),onClick:t(y)},null,8,["icon","onClick"])]),_:1})])]),r("div",ye,[e(G,{data:t(c).data,border:"",stripe:"","table-layout":"fixed",style:{width:"100%"},onSelectionChange:t(z)},{default:l(()=>[e(i,{type:"selection",width:"40"}),e(i,{prop:"nickname",label:"昵称",align:"center","min-width":"150"}),e(i,{prop:"username",label:"账号",align:"center","min-width":"150"}),e(i,{prop:"group.name",label:"所属分组",align:"center","min-width":"150"}),e(i,{prop:"updated_at",label:"创建时间",align:"center","min-width":"150"}),e(i,{prop:"weight",label:"权重",align:"center","min-width":"150"}),e(i,{prop:"remark",label:"备注",align:"center","min-width":"150"}),e(i,{label:"状态",align:"center","min-width":"80"},{default:l(({row:n})=>[e(q,{modelValue:n.status,"onUpdate:modelValue":_=>n.status=_,"active-value":1,"inactive-value":0,onChange:_=>t(D)("/api/v1/admin/user/switch",n.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{label:"操作",align:"center",fixed:"right","min-width":"300"},{default:l(n=>[e(o,{size:"small",onClick:_=>w(n.row)},{default:l(()=>[...a[11]||(a[11]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(o,{size:"small",type:"danger",onClick:_=>$("/api/v1/admin/user/delete",n.row)},{default:l(()=>[...a[12]||(a[12]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])]),r("div",xe,[r("div",Ee,[e(O,{"current-page":t(c).current_page,"onUpdate:currentPage":a[3]||(a[3]=n=>t(c).current_page=n),"page-size":t(c).page_size,"onUpdate:pageSize":a[4]||(a[4]=n=>t(c).page_size=n),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:t(c).page_total,onSizeChange:t(F),onCurrentChange:t(B)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}}),Ne=_e(Ve,[["__scopeId","data-v-52100f59"]]);export{Ne as default};
//# sourceMappingURL=home-Py_xqBHP.js.map
