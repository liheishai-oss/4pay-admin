import{d as B,g as d,M as S,w as r,N as I,O,P as T,Q as j,o as q,a as t,i as A,k as F,R as K,l as M,L as P,S as L,e as Q,U as W,v as z,t as H,V as J,W as X,x as Y}from"./index-Cc4fVNof.js";/* empty css                    *//* empty css                 *//* empty css             *//* empty css                     *//* empty css               */const Z={class:"custom-tree-node-container"},re=B({__name:"edit",emits:["refresh"],setup($,{expose:_,emit:f}){const v=({isPenultimate:l},e)=>l?"is-penultimate":"",u=d(!1),i=d(),y=d(),b={name:[{required:!0,message:"请输入分组名称",trigger:"blur"}],parent_id:[{required:!1}]},a=d({id:0,parent_id:"",name:"",weight:0,remark:"",is_enabled:0}),p=d([]),k=async()=>{try{const{data:l}=await T(a.value.id);p.value=l||[]}catch(l){console.error("获取用户权限失败:",l)}},c=d([]),g=async()=>{try{const{data:l}=await O(a.value.id);c.value=l||[]}catch(l){console.error("获取用户权限失败:",l)}},V=async l=>{try{const{data:e}=await j(l);return e}catch(e){console.error("获取用户权限失败:",e)}},w={label:"name",children:"children"},h=f,x=async(l={})=>{console.log("接收参数",l);const e={...l};if(e.parent_id===0&&(e.parent_id=""),Object.assign(a.value,e),await g(),await k(),e.id>0){const n=await V(e.id);console.log("详情",n),Object.assign(a.value,n)}else a.value.id=0;console.log(a.value),u.value=!0},U=async()=>{var s;const l=((s=i.value)==null?void 0:s.getCheckedKeys())||[],e={...a.value,rule_ids:l};let n;return e.id==0?n=await J(e):n=await X(e),n.status&&(Y.success(n.message),h("refresh"),u.value=!1),!1};return _({open:x}),(l,e)=>{const n=K,s=F,m=M,E=P,G=L,R=W,N=z,C=A,D=I;return q(),S(D,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=o=>u.value=o),title:"用户分组",width:"40%"},{default:r(()=>[t(C,{model:a.value,"label-width":"100px",rules:b,ref_key:"formRef",ref:y},{default:r(()=>[t(s,{label:"上级分组",prop:"parent_id"},{default:r(()=>[t(n,{modelValue:a.value.parent_id,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.parent_id=o),data:c.value,props:w,"node-key":"id","check-strictly":"",placeholder:"请选择上级分组",clearable:"",filterable:!0,"allow-create":!0,"default-value":"0"},null,8,["modelValue","data"])]),_:1}),t(s,{label:"分组名称",prop:"title"},{default:r(()=>[t(m,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.name=o),placeholder:"请输入分组名称"},null,8,["modelValue"])]),_:1}),t(s,{label:"状态",prop:"status"},{default:r(()=>[t(E,{modelValue:a.value.is_enabled,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.is_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(s,{label:"权重",prop:"weight"},{default:r(()=>[t(G,{modelValue:a.value.weight,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.weight=o),min:0},null,8,["modelValue"])]),_:1}),t(s,{label:"分配权限",prop:"parent_id"},{default:r(()=>[Q("div",Z,[t(R,{style:{"max-width":"600px"},data:p.value,"show-checkbox":"",ref_key:"treeRef",ref:i,"node-key":"id","default-expanded-keys":a.value.rule_ids,"default-checked-keys":a.value.rule_ids,"expand-on-click-node":!1,props:{class:v,label:"title"}},null,8,["data","default-expanded-keys","default-checked-keys","props"])])]),_:1}),t(s,{label:"备注",prop:"remark"},{default:r(()=>[t(m,{modelValue:a.value.remark,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.remark=o),type:"textarea"},null,8,["modelValue"])]),_:1}),t(s,null,{default:r(()=>[t(N,{type:"primary",onClick:U},{default:r(()=>[...e[6]||(e[6]=[H("提交",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{re as _};
//# sourceMappingURL=edit.vue_vue_type_style_index_0_lang-DkCC_809.js.map
