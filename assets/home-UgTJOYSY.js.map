{"version":3,"mappings":"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","names":["EditForm","defineAsyncComponent","__vitePreload","editFormRef","ref","openEditFrom","row","DemoForm","demoFormRef","openDemoFrom","handleSelectionChange","hasSelectedRows","showSearch","toggleSearch","loadData","data","refreshData","handleSizeChange","handleCurrentChange","searchParams","deleteRows","toggleSwitch","useTableDataPlugin","searchForm","searchLoading","handleSearch","error","handleReset","onMounted","handleDelete","api","handleBatchDelete","_createVNode","_unref","_Transition","_withDirectives","_createElementVNode","_hoisted_1","_component_el_card","_hoisted_2","_hoisted_3","_component_el_icon","Search","_component_el_button","Close","_component_el_form","_component_el_row","_component_el_col","_component_el_form_item","_component_el_input","_cache","$event","_hoisted_4","Refresh","_hoisted_5","Plus","_hoisted_6","_component_el_button_group","_hoisted_7","_component_el_table","_component_el_table_column","_withCtx","_component_el_switch","_createTextVNode","_toDisplayString","scope","_hoisted_8","_hoisted_9","_component_el_pagination"],"ignoreList":[],"sources":["../../src/pages/channel/home.vue"],"sourcesContent":["<template>\n  <!-- 添加/编辑通道对话框 -->\n  <EditForm ref=\"editFormRef\" @refresh=\"refreshData\"/>\n  <!--  拉单测试对话框-->\n  <DemoForm ref=\"demoFormRef\" @refresh=\"refreshData\"/>\n  <!-- 搜索菜单过渡效果 -->\n  <transition name=\"fade\">\n    <div class=\"table-com-search\" v-show=\"showSearch\">\n      <el-card class=\"search-card\" shadow=\"never\">\n        <template #header>\n          <div class=\"search-header\">\n            <span class=\"search-title\">\n              <el-icon><Search /></el-icon>\n              通道搜索\n            </span>\n            <el-button type=\"text\" @click=\"toggleSearch\" class=\"close-btn\">\n              <el-icon><Close /></el-icon>\n            </el-button>\n          </div>\n        </template>\n        \n        <el-form :model=\"searchForm\" label-width=\"100px\" class=\"search-form\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"6\">\n              <el-form-item label=\"通道名称\">\n                <el-input \n                  v-model=\"searchForm.channel_name\" \n                  placeholder=\"请输入通道名称\" \n                  clearable \n                  prefix-icon=\"Search\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"产品编码\">\n                <el-input \n                  v-model=\"searchForm.product_code\" \n                  placeholder=\"请输入产品编码\" \n                  clearable \n                  prefix-icon=\"Document\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item>\n                <div class=\"search-buttons\">\n                  <el-button type=\"primary\" @click=\"handleSearch\" :loading=\"searchLoading\">\n                    <el-icon><Search /></el-icon>\n                    搜索\n                  </el-button>\n                  <el-button @click=\"handleReset\">\n                    <el-icon><Refresh /></el-icon>\n                    重置\n                  </el-button>\n                </div>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </el-form>\n      </el-card>\n    </div>\n  </transition>\n\n  <!-- 表头操作 -->\n  <div class=\"table-header ba-scroll-style\">\n    <el-button :icon=\"Refresh\" @click=\"refreshData\" color=\"#40485b\"/>\n    <el-button type=\"primary\" :icon=\"Plus\" @click=\"openEditFrom\">添加</el-button>\n    <el-button type=\"primary\" :disabled=\"!hasSelectedRows\">编辑</el-button>\n    <el-button type=\"danger\" :disabled=\"!hasSelectedRows\"  @click=\"handleBatchDelete('/api/v1/admin/payment-channel/batch-delete')\">删除</el-button>\n    <div class=\"table-search\">\n      <el-button-group class=\"ml-4\">\n        <el-button :icon=\"Search\" @click=\"toggleSearch\"/>\n      </el-button-group>\n    </div>\n  </div>\n\n  <!-- 表格内容 -->\n  <div style=\"width: 100%; overflow-x: auto;\" class=\"table-content\">\n    <el-table\n        :data=\"data.data\"\n        border\n        stripe\n        max-height=\"600\"\n        style=\"width: 100%;\"\n        @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column type=\"selection\" width=\"40\"/>\n\n      <el-table-column prop=\"channel_name\" label=\"通道名称\" align=\"center\" min-width=\"150\"/>\n      <el-table-column prop=\"supplier_name\" label=\"供应商/预付\" align=\"center\" min-width=\"150\">\n        <template #default=\"{ row }\">测试/100</template>\n      </el-table-column>\n      <el-table-column prop=\"product_code\" label=\"产品编码\" align=\"center\" min-width=\"150\"/>\n      <el-table-column label=\"状态\" align=\"center\" min-width=\"90\">\n        <template #default=\"{ row }\">\n          <el-switch\n              v-model=\"row.status\"\n              :active-value=\"1\"\n              :inactive-value=\"0\"\n              @change=\"toggleSwitch('/api/v1/admin/payment-channel/status-switch', row.id)\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"weight\" label=\"权重\" align=\"center\" min-width=\"80\"/>\n      <el-table-column prop=\"min_amount\" label=\"最小金额\" align=\"center\" min-width=\"120\">\n        <template #default=\"{ row }\">{{ (row.min_amount / 100).toFixed(2) }}</template>\n      </el-table-column>\n      <el-table-column prop=\"max_amount\" label=\"最大金额\" align=\"center\" min-width=\"120\">\n        <template #default=\"{ row }\">{{ row.max_amount === 0 ? '不限制' : (row.max_amount / 100).toFixed(2) }}</template>\n      </el-table-column>\n      <el-table-column prop=\"cost_rate\" label=\"费率\" align=\"center\" min-width=\"100\">\n        <template #default=\"{ row }\">{{ (row.cost_rate / 100).toFixed(2) }}</template>\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" min-width=\"150\" show-overflow-tooltip/>\n      <!-- 操作列 -->\n      <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" min-width=\"180\">\n        <template #default=\"scope\">\n          <el-button size=\"small\" @click=\"openDemoFrom(scope.row)\">拉单测试</el-button>\n          <el-button size=\"small\" @click=\"openEditFrom(scope.row)\">编辑</el-button>\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDelete('/api/v1/admin/payment-channel/batch-delete', scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n\n  <!-- 分页 -->\n  <div class=\"table-footer\">\n    <div class=\"table-pagination\">\n      <el-pagination\n          v-model:current-page=\"data.current_page\"\n          v-model:page-size=\"data.page_size\"\n          :page-sizes=\"[10, 50, 100, 200]\"\n          :background=\"true\"\n          prev-text=\"上一页\"\n          next-text=\"下一页\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"data.page_total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { Plus, Refresh, Search, Close, Document } from '@element-plus/icons-vue';\nimport { ref, onMounted, defineAsyncComponent } from 'vue';\nimport { useTableDataPlugin } from \"@/utils/plugins/table.plugin.ts\";\n\n// 导入编辑弹窗\nconst EditForm = defineAsyncComponent(() => import('./edit.vue'));\nconst editFormRef = ref(null);\nconst openEditFrom = (row = {}) => {\n  if (editFormRef.value) editFormRef.value.open({ ...row });\n};\n// 导入拉单测试\nconst DemoForm = defineAsyncComponent(() => import('./demo.vue'));\nconst demoFormRef = ref(null);\nconst openDemoFrom = (row = {}) => {\n  console.log(row);\n  if (demoFormRef.value) {\n    demoFormRef.value.open({ ...row}); // 传递 `row` 作为参数\n  } else {\n    console.error(\"ComplaintForm 组件未正确挂载！\");\n  }\n};\n// 表格插件管理数据\nconst {\n  handleSelectionChange,\n  hasSelectedRows,\n  isVisible: showSearch,\n  toggleVisibility: toggleSearch,\n  loadData,\n  data,\n  refreshData,\n  handleSizeChange,\n  handleCurrentChange,\n  searchParams,\n  deleteRows,\n  toggleSwitch,\n  resetSearchParams\n} = useTableDataPlugin(\"/api/v1/admin/payment-channel\");\n\n// 搜索表单数据\nconst searchForm = ref({\n  channel_name: '',\n  product_code: ''\n});\n\n// 搜索加载状态\nconst searchLoading = ref(false);\n\n// 处理搜索\nconst handleSearch = async () => {\n  searchLoading.value = true;\n  try {\n    // 将搜索表单数据同步到searchParams\n    searchParams.value = { ...searchForm.value };\n    await refreshData();\n  } catch (error) {\n    console.error('搜索失败:', error);\n    ElMessage.error('搜索失败，请重试');\n  } finally {\n    searchLoading.value = false;\n  }\n};\n\n// 处理重置\nconst handleReset = () => {\n  searchForm.value = {\n    channel_name: '',\n    product_code: ''\n  };\n  searchParams.value = { ...searchForm.value };\n  refreshData();\n};\n\nonMounted(() => loadData());\n\n// 单条删除\nconst handleDelete = (api: string, row: any) => {\n  deleteRows(api, [row.id]);\n};\n\n// 批量删除\nconst handleBatchDelete = (api: string) => {\n  deleteRows(api);\n};\n</script>\n\n<style scoped>\n/* 搜索卡片样式 */\n.search-card {\n  margin-bottom: 20px;\n  border: 1px solid #e4e7ed;\n  border-radius: 8px;\n}\n\n.search-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.search-title {\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  color: #303133;\n}\n\n.search-title .el-icon {\n  margin-right: 8px;\n  color: #409eff;\n}\n\n.close-btn {\n  padding: 0;\n  color: #909399;\n}\n\n.close-btn:hover {\n  color: #f56c6c;\n}\n\n.search-form {\n  padding: 0;\n}\n\n.search-buttons {\n  display: flex;\n  gap: 8px;\n}\n\n.search-buttons .el-button {\n  min-width: 80px;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.table-com-search {\n  background: #fafafa;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n</style>\n"],"file":"assets/home-UgTJOYSY.js"}